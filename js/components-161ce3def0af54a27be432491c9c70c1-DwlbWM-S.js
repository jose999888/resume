import{d as D,r as P,c as T,o as z,a as E,b as G,e as m,w as j,v as q,n as Q,f as U,t as N}from"./vendor-B53ZnZId.js";import{A as W,G as g,C as L,B as V}from"./vendor-pixi-js-CbWXL6N4.js";import{_ as u,m as F}from"./vendor-matter-js-BPzui2TA.js";import{G as X,T as Y}from"./vendor-tweenjs-BtMkXI7v.js";const H=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function I(h,t){const x=v();return I=function(e,s){return e=e-311,x[e]},I(h,t)}(function(h,t){const x=I,e=h();for(;;)try{if(parseInt(x(313))/1+parseInt(x(320))/2*(-parseInt(x(315))/3)+-parseInt(x(312))/4+-parseInt(x(314))/5+parseInt(x(316))/6+-parseInt(x(311))/7*(parseInt(x(317))/8)+parseInt(x(318))/9*(parseInt(x(319))/10)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(v,952963);function v(){const h=["reduce","7RAloet","5308172dAcmUm","1616377rmWtGw","4279195QPkIjs","366aYwiYW","11073198SznxzB","9800936bwdwdo","18QNynji","5623760xqbLgg","3700LyTGQs"];return v=function(){return h},v()}function K(){const h=r=>{const l=I,d=r[l(321)]((i,a)=>i+a,0);return r.map(i=>i/d)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const Z=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),c=R;(function(h,t){const x=R,e=h();for(;;)try{if(-parseInt(x(370))/1*(parseInt(x(457))/2)+-parseInt(x(382))/3+parseInt(x(426))/4*(-parseInt(x(444))/5)+-parseInt(x(409))/6+parseInt(x(402))/7*(parseInt(x(350))/8)+parseInt(x(424))/9*(parseInt(x(408))/10)+parseInt(x(362))/11===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,769838);function R(h,t){const x=C();return R=function(e,s){return e=e-333,x[e]},R(h,t)}const{colors:O,shadows:J,resText:S,probabilities:$}=K();function C(){const h=["res-","createRoundedRect","resBoxAnimal","createResultBox","floor","set","gap","unshift","18lUkkRx","boxWidth","456uDnlmR","stage","roundShape","click","mouseover","isNaN","canvas","position","label","recordArr","recordCallback","world","ballParamsMap","destroy","tweenGroup","timeScale","push","popCallback","19195oDtglF","circleRadius","get","appendChild","addXPower","stackBox","mouseout","create","pinAnimal","collisionStart","height","log","style","1387864TpcfgZ","ball","getBg","nonCollideGroup","findResultArea","init","velocityIterations","radius","min","add","row-","显示游戏结果事件","setVelocity","maxCount","pinsMatter","pop","getText","createBall","Body","toFixed","frictionAir","text","ticker","low","23528jXKhFV","setBallConfig","remove","tickerFn","resBoxMap","firstY","width","boxHeight","fill","app","lastTime","start","17378834LsYNAr","runner","positionIterations","ballConfig","ballRadius","getShadow","startY","res-text-","1deKBME","rows","timing","circle","delete","pinParams","engine","entries","Engine","roundRect","startsWith","Ball hit result box ","1442970VxljSL","dealCollisions","stroke","onComplete","gameRes","removeChild","split","listenCollisions","pinsGfx","children","getChildByLabel","update","Composite","recordCount","addChild","center","length","level","getProbability","devicePixelRatio","357sauYju","random","angle","now","forEach","clearPinsAndRes","6766960DffVuq","4205226mtXtdT","setGameRes","Bodies","nextGroup","Runner","clear","setLevel"];return C=function(){return h},C()}class x0{id=1;canvas;[c(359)];[c(376)];world;runner;[c(356)];[c(454)];[c(353)];ballParamsMap=new Map;pinParams={};[c(460)]=u[c(344)][c(412)](!0);ballConfig={ballRadius:4,frictionAir:.05};popCallback;recordCallback;[c(386)];constructor(t){const x=c;this[x(432)]=document.createElement(x(432)),t[x(447)](this[x(432)]),this[x(359)]=new W,this[x(376)]=u[x(378)].create(),this[x(437)]=this[x(376)][x(437)],this[x(363)]=u[x(413)][x(451)](),this[x(376)][x(364)]=10,this.engine[x(463)]=10,this[x(376)][x(372)][x(441)]=2}async[c(462)](t,x,e){const s=c;this[s(356)]=t,this.height=x,this[s(432)][s(456)].width=t+"px",this.canvas[s(456)][s(454)]=x+"px",this[s(449)].position.set(this[s(356)]-45,this[s(454)]/4),this[s(359)].stage[s(396)](this[s(449)]),await this[s(359)][s(462)]({canvas:this[s(432)],width:t,height:x,background:e,antialias:!0,resolution:window[s(401)]}),u[s(413)].run(this[s(363)],this[s(376)]),this.listenCollisions()}[c(351)](t,x){const e=c;this[e(365)]={ballRadius:t,frictionAir:x}}[c(343)](t){const x=c,e=this[x(356)]/2,s=[e,e+this[x(375)][x(422)]],r=[e,e-this.pinParams[x(422)]],l=t[0],d=Math[x(420)](Math[x(403)]()*2),f=l==="R"?s[d]:r[d],i=u[x(411)][x(373)](f,0,this[x(365)][x(366)],{id:this.id++,label:x(458),mass:1,restitution:0,friction:0,frictionAir:this[x(365)][x(346)],collisionFilter:{group:this[x(460)]}}),a=new g()[x(373)](0,0,this.ballConfig[x(366)])[x(358)](16733525);a[x(433)][x(421)](i[x(433)].x,i[x(433)].y),u[x(394)][x(335)](this.world,i),this[x(359)][x(427)][x(396)](a);const n=()=>{const b=x;a.position[b(421)](i[b(433)].x,i[b(433)].y),a.rotation=i[b(404)];const _=(this[b(375)][b(371)]-2)*this[b(375)][b(422)]+this[b(375)].gap/2;i[b(433)].y>_&&(this[b(461)](i[b(433)].x),u[b(394)][b(352)](this[b(437)],i),a[b(439)](),this[b(359)].ticker[b(352)](n),this[b(438)][b(374)](i.id))};this[x(359)][x(348)].add(n);const o={path:t,start:d,fir:l};this[x(438)][x(421)](i.id,o)}pinsMatter=[];[c(390)]=[];createPinsAndResultBoxes(t){const x=c;this[x(407)](),this[x(375)]=t;const{rows:e,startY:s,gap:r,pinRadius:l}=t;for(let d=2;d<e;d++){const f=d+1,i=(f-1)*r,a=this[x(356)]/2-i/2;for(let n=0;n<f;n++){const o=a+n*r,b=s+(d-2)*r,_=u[x(411)].circle(o,b,l,{isStatic:!0,label:x(336)+(d-1)+"-"+n}),p=new g()[x(373)](0,0,l)[x(358)](16777215);p.x=o,p.y=b,this[x(340)][x(442)](_),this[x(390)][x(442)](p),u[x(394)][x(335)](this[x(437)],_),this[x(359)].stage[x(396)](p)}}this[x(419)]()}[c(383)](t){const x=c,{bodyA:e,bodyB:s}=t,r=e[x(434)]===x(458)?e:s[x(434)]===x(458)?s:null,l=e[x(434)].startsWith(x(336))?e[x(434)]:s[x(434)][x(380)](x(336))?s.label:null,d=e[x(434)][x(380)](x(336))?e:s.label[x(380)](x(336))?s:null;if(d&&this.pinAnimal(d),!r||!l)return;const f=r.id,i=Number.parseInt(l[x(388)]("-")[1],10),a=this[x(438)][x(446)](f);if(!a)return;const{path:n,start:o,fir:b}=a;if(!n||!b||Number[x(431)](i))return;if(i===1){const p=b==="R"?o===0?1:-1:o===0?-1.2:1.2;this[x(448)](r,p);return}const _=n[i-1];_==="R"?this[x(448)](r,1.2):_==="L"&&this[x(448)](r,-1.2)}resBoxMap=new Map;[c(399)]=c(349);async[c(419)](){const t=c,x=this[t(375)].gap,e=x-2,s=this.pinParams[t(371)]-1,r=s-2,l=this.pinParams[t(368)]+r*x+x/2,d=this.width/2-s*x/2,f=this[t(375)][t(371)]-2;for(let i=0;i<s;i++){const a=d+i*x+1,n=new L({label:t(416)+i,interactive:!0}),o=new g()[t(379)](0,0,e,14,2)[t(358)]({color:this[t(459)](f,i)}),b=new g()[t(379)](0,0,e,16,2)[t(358)]({color:this.getShadow(f,i)});b[t(433)].set(0,0);const _=this.getText(this[t(399)],f,i)||0,p=new V({label:t(369)+i,text:_+`
x`,style:{fontSize:14,fill:"#000",align:t(397)},anchor:.5});p[t(433)][t(421)](e/2,8),p.scale[t(421)](.4),n[t(396)](b),n[t(396)](o),n.addChild(p),n[t(433)][t(421)](a,l),this.resBoxMap[t(421)](i,n),this[t(359)][t(427)][t(396)](n),n.on(t(430),()=>{const y=t;this[y(443)](!0,this[y(400)](this.pinParams[y(371)]-2,i)[y(345)](4))}),n.on(t(450),()=>{this[t(443)](!1)})}}[c(407)](){const t=c;for(const x of this[t(340)])u[t(394)][t(352)](this[t(437)],x);for(const x of this[t(390)])x.destroy();this[t(340)]=[],this[t(390)]=[],this.resBoxMap[t(406)](x=>{x[t(439)]()}),this[t(354)].clear(),this[t(355)]=0}addXPower(t,x){const e=c;F.Body[e(338)](t,{x,y:0})}getBg(t,x){return O["_"+t][x]}[c(367)](t,x){return J["_"+t][x]}[c(342)](t,x,e){return S[t]["_"+x][e]}[c(400)](t,x){return $["_"+t][x]*100}setPopCb(t){const x=c;this[x(443)]=t}setRecordClickCb(t){const x=c;this[x(436)]=t}[c(415)](t){const x=c;if(this[x(399)]=t,!!S[t])for(const[s,r]of this[x(354)]){const l=r[x(392)](x(369)+s),d=S[t]["_"+(this[x(375)][x(371)]-2)][s];l[x(347)]=d+`
x`}}findResultArea(t){const x=c;for(const[e,s]of this.resBoxMap[x(377)]()){const r=s.x,l=s.x+s[x(356)];t>=r&&t<=l&&(this[x(418)](s),console[x(455)](x(381)+e))}}[c(389)](){const t=c;F.Events.on(this[t(376)],t(453),x=>{const e=t;for(const s of x.pairs)this[e(383)](s)})}[c(452)](t){const x=c,e=new g;e[x(433)][x(421)](t.position.x,t[x(433)].y),this.app[x(427)][x(396)](e);const s=0,r=10,l=400,d=performance[x(405)](),f=i=>{const a=x,n=i-d,o=Math[a(334)](n/l,1),b=s+(r-s)*o,_=.9*(1-o);e[a(414)]();const p=t[a(445)]??4;e[a(373)](0,0,p*1.2+b).fill({color:16777215,alpha:_}),o<1?requestAnimationFrame(f):e[a(439)]()};requestAnimationFrame(f)}[c(355)]=0;[c(418)](t){const x=c,e=t[x(433)].y;this[x(355)]||(this.firstY=e);const s=4,r=150,l=performance[x(405)](),d=f=>{const i=x,a=f-l,n=Math[i(334)](a/r,1);t[i(433)].y=e+s*n,n<1?requestAnimationFrame(d):t[i(433)].y=this[i(355)]};requestAnimationFrame(d)}[c(440)]=new X;[c(435)]=[];[c(339)]=4;boxWidth=26;[c(357)]=26;[c(449)]=new L;recordCount=0;[c(410)](t){const x=c;this[x(386)]=t}[c(417)](t,x,e){const s=c,r=e?.6:1,l=[{x:0,y:this[s(357)],radius:0},{x:this.boxWidth,y:this[s(357)],radius:0},{x:this[s(425)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(l[2].radius=4,l[3][s(333)]=4):t===this[s(339)]-1&&(l[0].radius=4,l[1][s(333)]=4),new g({label:String(x)})[s(428)](l,10)[s(358)]({color:x,alpha:r})[s(384)]({width:1,color:0})}addRecord(t,x){const e=c,s=new L({interactive:!0});s[e(433)][e(421)](0,-this[e(357)]);const r=this.createRoundedRect(this[e(395)],x),l=new V({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});l[e(433)].x=this[e(425)]/2,l[e(433)].y=this.boxHeight/2,s[e(396)](r),s[e(396)](l),this.stackBox[e(396)](s),this[e(435)][e(423)](s);let d;s.on(e(430),()=>{const i=e;d=this[i(417)](this[i(395)],0,!0),s[i(396)](d)}),s.on(e(450),()=>{const i=e;d&&(s[i(387)](d),d?.[i(439)](),d=null)}),s.on(e(429),()=>{const i=e;console.log(i(337)),this.recordCallback&&this[i(436)]()}),this[e(395)]++,this[e(395)]===4&&(this.recordCount=1),this[e(435)].forEach((i,a)=>{const n=e,o=a*this[n(357)];if(this[n(435)][n(398)]>1){const b=this[n(435)][a],_=b[n(387)](b[n(391)][0]),p=_[n(434)];_[n(439)](),this[n(435)][a][n(396)](this[n(417)](a,Number(p))),this[n(435)][a].children.reverse()}new Y(i[n(433)],this[n(440)]).to({y:o},200).start()});const f=i=>{const a=e;this.tweenGroup[a(393)](i[a(360)])};if(this[e(435)][e(398)]>this[e(339)]){const i=this[e(435)][e(341)]();new Y(i[e(433)],this[e(440)]).to({alpha:0},150)[e(385)](()=>{const a=e;this[a(359)][a(348)][a(352)](f),this[a(449)][a(387)](i),i?.destroy()})[e(361)]()}this[e(359)].ticker[e(335)](f)}}const w=k;(function(h,t){const x=k,e=h();for(;;)try{if(parseInt(x(474))/1*(-parseInt(x(438))/2)+parseInt(x(473))/3+parseInt(x(440))/4+parseInt(x(454))/5*(-parseInt(x(455))/6)+-parseInt(x(457))/7+parseInt(x(434))/8*(parseInt(x(439))/9)+parseInt(x(468))/10===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,567935);const t0={class:w(432)},e0={class:w(432)},s0={class:w(448)},a0=[w(444)],i0={class:"hint-row"},n0={key:0,id:w(460),class:"help"},c0={class:w(463)},o0={class:"w-full flex justify-center items-center"},r0=["disabled"];function k(h,t){const x=B();return k=function(e,s){return e=e-427,x[e]},k(h,t)}function B(){const h=["off","createBall","air","relative","createPinsAndResultBoxes","5276872wdEkbP","仅允许填写字符 L 或 R","pins","span","10474pYVBOv","9VEQnDZ","315128dwSgFs","value","toUpperCase","请输入 10 位路径，仅允许 L 或 R","aria-invalid","div"," 开始游戏 ","test","input-wrap","radius","start-btn","length","path","slice","6910UhLVwD","1158bnxMEN"," 位，请填写 10 位","7384937DrbzED","characters","ballConfig","path-help","AppPlinko","replace","counter","container","label","投球路径（10 位，仅 L/R）","split","10720770ETvzId","input","2 秒允许点击一次","setBallConfig","init","1321611IkSJBm","69VxgVtU","当前 ","/10","例如：LRRLLRLR","input-control","button"];return B=function(){return h},B()}const b0=10,l0=D({__name:w(461),setup(h){const t=w,x=P(null);let e;const s=P(""),r=T(()=>/^[LR]{10}$/[t(447)](s[t(441)])),l=P(!1),d=T(()=>{const a=t;return s[a(441)]?/[^LR]/[a(447)](s[a(441)])?a(435):s[a(441)].length!==10?a(475)+s[a(441)][a(451)]+a(456):"":a(443)});function f(a){const n=t,o=a.target,b=o[n(441)][n(442)]()[n(462)](/[^LR]/g,"")[n(453)](0,10);s.value=b}async function i(){const a=t;if(!r.value||l[a(441)]||!e)return;l[a(441)]=!0;const n=s[a(441)][a(467)]("");e[a(430)](n),setTimeout(()=>l[a(441)]=!1,400)}return z(async()=>{const a=t,n=Z.get(10);x[a(441)]&&(e=new x0(x[a(441)]),await e[a(472)](300,276,"#1e1e1e"),await e[a(433)](n?.[a(436)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(471)](n?.[a(459)][a(449)],n?.[a(459)][a(431)]))}),(a,n)=>{const o=t;return G(),E(o(445),t0,[m(o(445),e0,[m(o(445),{ref_key:o(464),ref:x,class:o(464)},null,512)]),m("div",s0,[n[1]||(n[1]=m("label",{class:o(465),for:o(452)},o(466),-1)),j(m(o(469),{id:o(452),class:Q([o(427),{invalid:!r.value&&s[o(441)]}]),type:"text","onUpdate:modelValue":n[0]||(n[0]=b=>s[o(441)]=b),maxlength:b0,placeholder:o(477),onInput:f,autocomplete:o(429),autocapitalize:o(458),spellcheck:"false","aria-describedby":o(460),"aria-invalid":!r[o(441)]},null,42,a0),[[q,s[o(441)]]]),m(o(445),i0,[d[o(441)]?(G(),E(o(437),n0,N(d[o(441)]),1)):U("",!0),m(o(437),c0,N(s[o(441)].length)+o(476),1)])]),m("div",o0,[m(o(428),{class:o(450),disabled:!r[o(441)]||l[o(441)],onClick:i,title:o(470)},o(446),8,r0)])])}}});function A(h,t){var x=M();return A=function(e,s){e=e-344;var r=x[e];return r},A(h,t)}var d0=A;function M(){var h=["1108275sMQlHK","1499566QXUNvv","341984eXsQnD","593971mlSeBt","1400976jHtpft","data-v-cb23dd70","3001617qpsklj","5013125zGZiXN"];return M=function(){return h},M()}(function(h,t){for(var x=A,e=h();;)try{var s=parseInt(x(344))/1+-parseInt(x(345))/2+parseInt(x(350))/3+-parseInt(x(346))/4+-parseInt(x(351))/5+parseInt(x(348))/6+parseInt(x(347))/7;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(M,589259);const u0=H(l0,[["__scopeId",d0(349)]]);export{u0 as A,H as _};
