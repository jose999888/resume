import{d as H,r as M,c as S,o as q,a as Y,b as G,e as m,w as N,v as D,n as J,f as z,t as W}from"./vendor-B53ZnZId.js";import{A as O,G as I,C as L,B as F}from"./vendor-pixi-js-CbWXL6N4.js";import{_ as u,m as V}from"./vendor-matter-js-BPzui2TA.js";import{G as Q,T as X}from"./vendor-tweenjs-BtMkXI7v.js";const K=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};(function(h,t){const x=v,e=h();for(;;)try{if(parseInt(x(146))/1+-parseInt(x(145))/2*(-parseInt(x(150))/3)+parseInt(x(151))/4*(-parseInt(x(152))/5)+parseInt(x(147))/6+-parseInt(x(148))/7*(-parseInt(x(144))/8)+-parseInt(x(143))/9*(parseInt(x(154))/10)+-parseInt(x(149))/11===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,187094);function v(h,t){const x=C();return v=function(e,s){return e=e-143,x[e]},v(h,t)}function U(){const h=r=>{const d=v,l=r.reduce((i,a)=>i+a,0);return r[d(153)](i=>i/l)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const j=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function C(){const h=["669SxwTYN","1171080sYnogv","5LvouMJ","map","5570SCmPDN","3033lIrJWg","19976viKWPQ","2902gHoWgQ","354520TTFaiO","898020KPwROf","854pjWhCz","5113064Rehnus"];return C=function(){return h},C()}const n=y;function y(h,t){const x=R();return y=function(e,s){return e=e-427,x[e]},y(h,t)}(function(h,t){const x=y,e=h();for(;;)try{if(parseInt(x(448))/1*(-parseInt(x(513))/2)+-parseInt(x(474))/3*(-parseInt(x(560))/4)+-parseInt(x(544))/5*(-parseInt(x(492))/6)+-parseInt(x(497))/7*(-parseInt(x(450))/8)+-parseInt(x(550))/9+parseInt(x(460))/10*(-parseInt(x(461))/11)+parseInt(x(489))/12*(parseInt(x(477))/13)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,430130);const{colors:Z,shadows:$,resText:T,probabilities:x0}=U();function R(){const h=["text","createBall","setLevel","positionIterations","setVelocity","recordArr","Runner","setGameRes","now","19573oErnDs","width","8YLkQic","boxHeight","res-text-","recordCallback","devicePixelRatio","getText","add","start","level","pinParams","45340dEmnrJ","2002KTUmdq","center","tweenGroup","engine","length","clear","canvas","create","forEach","addRecord","stroke","style","gap","2133543zexTeq","getProbability","destroy","15340uAOAME","removeChild","popCallback","collisionStart","firstY","row-","dealCollisions","nonCollideGroup","显示游戏结果事件","#000","resBoxMap","setRecordClickCb","5748oqfLoR","stackBox","toFixed","12IRJbsZ","pinsGfx","mouseover","Engine","ballParamsMap","3522673dAXqWJ","resBoxAnimal","getShadow","entries","Events","run","circleRadius","height","fill","children","createElement","Composite","radius","timeScale","timing","startsWith","18xmALXQ","rows","stage","floor","gameRes","maxCount","push","roundRect","startY","ball","appendChild","min","position","tickerFn","Bodies","pinsMatter","label","createRoundedRect","addXPower","scale","remove","mouseout","Ball hit result box ","angle","setBallConfig","delete","createPinsAndResultBoxes","onComplete","isNaN","velocityIterations","createResultBox","344795moufQH","ticker","app","addChild","getBg","ballConfig","4374747OYJshr","res-","frictionAir","findResultArea","recordCount","Body","pop","init","random","world","4YSXQrY","runner","update","log","roundShape","ballRadius","lastTime","setPopCb","parseInt","listenCollisions","boxWidth","set","circle"];return R=function(){return h},R()}class t0{id=1;canvas;app;engine;[n(559)];runner;width;height;[n(526)];[n(496)]=new Map;[n(459)]={};[n(484)]=u[n(555)].nextGroup(!0);[n(549)]={ballRadius:4,frictionAir:.05};[n(479)];recordCallback;[n(517)];constructor(t){const x=n;this.canvas=document[x(507)](x(467)),t[x(523)](this[x(467)]),this[x(546)]=new O,this[x(464)]=u[x(495)].create(),this[x(559)]=this.engine.world,this[x(427)]=u[x(445)][x(468)](),this.engine[x(442)]=10,this.engine[x(542)]=10,this[x(464)][x(511)][x(510)]=2}async[n(557)](t,x,e){const s=n;this.width=t,this[s(504)]=x,this[s(467)][s(472)][s(449)]=t+"px",this.canvas[s(472)][s(504)]=x+"px",this[s(490)][s(525)][s(437)](this[s(449)]-45,this.height/4),this[s(546)][s(515)][s(547)](this[s(490)]),await this[s(546)][s(557)]({canvas:this[s(467)],width:t,height:x,background:e,antialias:!0,resolution:window[s(454)]}),u[s(445)][s(502)](this[s(427)],this[s(464)]),this.listenCollisions()}[n(537)](t,x){const e=n;this[e(549)]={ballRadius:t,frictionAir:x}}[n(440)](t){const x=n,e=this[x(449)]/2,s=[e,e+this[x(459)][x(473)]],r=[e,e-this[x(459)][x(473)]],d=t[0],l=Math[x(516)](Math[x(558)]()*2),_=d==="R"?s[l]:r[l],i=u[x(527)][x(438)](_,0,this[x(549)][x(431)],{id:this.id++,label:"ball",mass:1,restitution:0,friction:0,frictionAir:this.ballConfig[x(552)],collisionFilter:{group:this[x(484)]}}),a=new I().circle(0,0,this.ballConfig[x(431)])[x(505)](16733525);a[x(525)].set(i[x(525)].x,i[x(525)].y),u[x(508)].add(this.world,i),this[x(546)][x(515)].addChild(a);const c=()=>{const f=x;a.position[f(437)](i[f(525)].x,i.position.y),a.rotation=i[f(536)];const b=(this[f(459)][f(514)]-2)*this[f(459)].gap+this[f(459)][f(473)]/2;i[f(525)].y>b&&(this[f(553)](i[f(525)].x),u[f(508)][f(533)](this[f(559)],i),a[f(476)](),this.app.ticker.remove(c),this[f(496)][f(538)](i.id))};this[x(546)][x(545)][x(456)](c);const o={path:t,start:l,fir:d};this[x(496)][x(437)](i.id,o)}pinsMatter=[];[n(493)]=[];[n(539)](t){const x=n;this.clearPinsAndRes(),this[x(459)]=t;const{rows:e,startY:s,gap:r,pinRadius:d}=t;for(let l=2;l<e;l++){const _=l+1,i=(_-1)*r,a=this.width/2-i/2;for(let c=0;c<_;c++){const o=a+c*r,f=s+(l-2)*r,b=u[x(527)][x(438)](o,f,d,{isStatic:!0,label:"row-"+(l-1)+"-"+c}),p=new I()[x(438)](0,0,d)[x(505)](16777215);p.x=o,p.y=f,this[x(528)][x(519)](b),this[x(493)][x(519)](p),u[x(508)].add(this[x(559)],b),this[x(546)].stage[x(547)](p)}}this[x(543)]()}[n(483)](t){const x=n,{bodyA:e,bodyB:s}=t,r=e[x(529)]==="ball"?e:s[x(529)]===x(522)?s:null,d=e[x(529)][x(512)](x(482))?e[x(529)]:s[x(529)][x(512)](x(482))?s[x(529)]:null,l=e[x(529)][x(512)](x(482))?e:s[x(529)][x(512)](x(482))?s:null;if(l&&this.pinAnimal(l),!r||!d)return;const _=r.id,i=Number[x(434)](d.split("-")[1],10),a=this.ballParamsMap.get(_);if(!a)return;const{path:c,start:o,fir:f}=a;if(!c||!f||Number[x(541)](i))return;if(i===1){const p=f==="R"?o===0?1:-1:o===0?-1.2:1.2;this[x(531)](r,p);return}const b=c[i-1];b==="R"?this[x(531)](r,1.2):b==="L"&&this.addXPower(r,-1.2)}[n(487)]=new Map;[n(458)]="low";async[n(543)](){const t=n,x=this[t(459)].gap,e=x-2,s=this.pinParams[t(514)]-1,r=s-2,d=this.pinParams[t(521)]+r*x+x/2,l=this[t(449)]/2-s*x/2,_=this[t(459)][t(514)]-2;for(let i=0;i<s;i++){const a=l+i*x+1,c=new L({label:t(551)+i,interactive:!0}),o=new I()[t(520)](0,0,e,14,2)[t(505)]({color:this[t(548)](_,i)}),f=new I()[t(520)](0,0,e,16,2)[t(505)]({color:this.getShadow(_,i)});f.position[t(437)](0,0);const b=this.getText(this[t(458)],_,i)||0,p=new F({label:t(452)+i,text:b+`
x`,style:{fontSize:14,fill:t(486),align:t(462)},anchor:.5});p.position[t(437)](e/2,8),p[t(532)][t(437)](.4),c[t(547)](f),c[t(547)](o),c[t(547)](p),c[t(525)][t(437)](a,d),this[t(487)][t(437)](i,c),this[t(546)][t(515)][t(547)](c),c.on(t(494),()=>{const g=t;this[g(479)](!0,this[g(475)](this[g(459)][g(514)]-2,i)[g(491)](4))}),c.on("mouseout",()=>{this[t(479)](!1)})}}clearPinsAndRes(){const t=n;for(const x of this[t(528)])V.Composite[t(533)](this[t(559)],x);for(const x of this[t(493)])x[t(476)]();this[t(528)]=[],this[t(493)]=[],this[t(487)][t(469)](x=>{x[t(476)]()}),this[t(487)][t(466)](),this[t(481)]=0}[n(531)](t,x){const e=n;u[e(555)][e(443)](t,{x,y:0})}[n(548)](t,x){return Z["_"+t][x]}[n(499)](t,x){return $["_"+t][x]}[n(455)](t,x,e){return T[t]["_"+x][e]}[n(475)](t,x){return x0["_"+t][x]*100}[n(433)](t){const x=n;this[x(479)]=t}[n(488)](t){this.recordCallback=t}[n(441)](t){const x=n;if(this[x(458)]=t,!!T[t])for(const[s,r]of this[x(487)]){const d=r.getChildByLabel(x(452)+s),l=T[t]["_"+(this.pinParams[x(514)]-2)][s];d[x(439)]=l+`
x`}}[n(553)](t){const x=n;for(const[e,s]of this[x(487)][x(500)]()){const r=s.x,d=s.x+s[x(449)];t>=r&&t<=d&&(this[x(498)](s),console[x(429)](x(535)+e))}}[n(435)](){const t=n;u[t(501)].on(this[t(464)],t(480),x=>{const e=t;for(const s of x.pairs)this[e(483)](s)})}pinAnimal(t){const x=n,e=new I;e[x(525)][x(437)](t.position.x,t[x(525)].y),this.app[x(515)][x(547)](e);const s=0,r=10,d=400,l=performance.now(),_=i=>{const a=x,c=i-l,o=Math[a(524)](c/d,1),f=s+(r-s)*o,b=.9*(1-o);e[a(466)]();const p=t[a(503)]??4;e[a(438)](0,0,p*1.2+f)[a(505)]({color:16777215,alpha:b}),o<1?requestAnimationFrame(_):e.destroy()};requestAnimationFrame(_)}[n(481)]=0;[n(498)](t){const x=n,e=t.position.y;this.firstY||(this[x(481)]=e);const s=4,r=150,d=performance[x(447)](),l=_=>{const i=x,a=_-d,c=Math[i(524)](a/r,1);t.position.y=e+s*c,c<1?requestAnimationFrame(l):t[i(525)].y=this[i(481)]};requestAnimationFrame(l)}[n(463)]=new Q;[n(444)]=[];[n(518)]=4;[n(436)]=26;boxHeight=26;[n(490)]=new L;[n(554)]=0;[n(446)](t){const x=n;this[x(517)]=t}[n(530)](t,x,e){const s=n,r=e?.6:1,d=[{x:0,y:this[s(451)],radius:0},{x:this.boxWidth,y:this[s(451)],radius:0},{x:this[s(436)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2][s(509)]=4,d[3][s(509)]=4):t===this[s(518)]-1&&(d[0][s(509)]=4,d[1].radius=4),new I({label:String(x)})[s(430)](d,10).fill({color:x,alpha:r})[s(471)]({width:1,color:0})}[n(470)](t,x){const e=n,s=new L({interactive:!0});s[e(525)][e(437)](0,-this[e(451)]);const r=this[e(530)](this.recordCount,x),d=new F({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d[e(525)].x=this[e(436)]/2,d[e(525)].y=this[e(451)]/2,s.addChild(r),s[e(547)](d),this[e(490)][e(547)](s),this[e(444)].unshift(s);let l;s.on(e(494),()=>{const i=e;l=this.createRoundedRect(this[i(554)],0,!0),s[i(547)](l)}),s.on(e(534),()=>{const i=e;l&&(s.removeChild(l),l?.[i(476)](),l=null)}),s.on("click",()=>{const i=e;console.log(i(485)),this[i(453)]&&this[i(453)]()}),this[e(554)]++,this[e(554)]===4&&(this.recordCount=1),this.recordArr[e(469)]((i,a)=>{const c=e,o=a*this[c(451)];if(this[c(444)][c(465)]>1){const f=this.recordArr[a],b=f[c(478)](f[c(506)][0]),p=b[c(529)];b[c(476)](),this[c(444)][a][c(547)](this.createRoundedRect(a,Number(p))),this[c(444)][a][c(506)].reverse()}new X(i[c(525)],this[c(463)]).to({y:o},200)[c(457)]()});const _=i=>{const a=e;this[a(463)][a(428)](i[a(432)])};if(this.recordArr.length>this[e(518)]){const i=this[e(444)][e(556)]();new X(i[e(525)],this.tweenGroup).to({alpha:0},150)[e(540)](()=>{const a=e;this[a(546)][a(545)].remove(_),this[a(490)].removeChild(i),i?.[a(476)]()})[e(457)]()}this[e(546)][e(545)].add(_)}}const w=k;function A(){const h=["container","215428enYFdG","5273736GXuJBM","toUpperCase","help","init","2 秒允许点击一次","counter","relative","w-full flex justify-center items-center","length","characters","19226rbszED","target","9XIPdur","仅允许填写字符 L 或 R","投球路径（10 位，仅 L/R）","disabled","ballConfig"," 开始游戏 ","aria-invalid","9weykiD","17863780gWDTWo","test","/10","请输入 10 位路径，仅允许 L 或 R","input-control","label","path-help","value","slice","10XmtmVc","createPinsAndResultBoxes","671540CXCWAK","26430UFSsfn"," 位，请填写 10 位","text","radius","1022bWsGVt","div","pins","input","#1e1e1e","get","off","span","2233095yJaFCX","split","false","button"];return A=function(){return h},A()}(function(h,t){const x=k,e=h();for(;;)try{if(-parseInt(x(338))/1*(-parseInt(x(336))/2)+parseInt(x(320))/3+-parseInt(x(325))/4*(parseInt(x(355))/5)+-parseInt(x(308))/6*(-parseInt(x(312))/7)+parseInt(x(326))/8+-parseInt(x(345))/9*(-parseInt(x(307))/10)+-parseInt(x(346))/11===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(A,468689);const e0={class:w(332)},s0={class:"relative"},a0={class:"input-wrap"},i0=[w(344)],n0={class:"hint-row"},c0={key:0,id:w(352),class:w(328)},o0={class:w(331)},r0={class:w(333)},d0=[w(341)];function k(h,t){const x=A();return k=function(e,s){return e=e-307,x[e]},k(h,t)}const f0=10,l0=H({__name:"AppPlinko",setup(h){const t=w,x=M(null);let e;const s=M(""),r=S(()=>/^[LR]{10}$/[t(347)](s[t(353)])),d=M(!1),l=S(()=>{const a=t;return s[a(353)]?/[^LR]/.test(s.value)?a(339):s[a(353)].length!==10?"当前 "+s[a(353)][a(334)]+a(309):"":a(349)});function _(a){const c=t,o=a[c(337)],f=o[c(353)][c(327)]().replace(/[^LR]/g,"")[c(354)](0,10);s[c(353)]=f}async function i(){const a=t;if(!r[a(353)]||d[a(353)]||!e)return;d[a(353)]=!0;const c=s[a(353)][a(321)]("");e.createBall(c),setTimeout(()=>d[a(353)]=!1,400)}return q(async()=>{const a=t,c=j[a(317)](10);x.value&&(e=new t0(x.value),await e[a(329)](300,276,a(316)),await e[a(356)](c?.[a(314)]??{rows:12,startY:24,gap:24,pinRadius:4}),e.setBallConfig(c?.[a(342)][a(311)],c?.ballConfig.air))}),(a,c)=>{const o=t;return G(),Y("div",e0,[m(o(313),s0,[m(o(313),{ref_key:o(324),ref:x,class:o(324)},null,512)]),m(o(313),a0,[c[1]||(c[1]=m("label",{class:o(351),for:"path"},o(340),-1)),N(m(o(315),{id:"path",class:J([o(350),{invalid:!r[o(353)]&&s[o(353)]}]),type:o(310),"onUpdate:modelValue":c[0]||(c[0]=f=>s[o(353)]=f),maxlength:f0,placeholder:"例如：LRRLLRLR",onInput:_,autocomplete:o(318),autocapitalize:o(335),spellcheck:o(322),"aria-describedby":o(352),"aria-invalid":!r[o(353)]},null,42,i0),[[D,s.value]]),m(o(313),n0,[l[o(353)]?(G(),Y(o(319),c0,W(l[o(353)]),1)):z("",!0),m(o(319),o0,W(s[o(353)][o(334)])+o(348),1)])]),m("div",r0,[m(o(323),{class:"start-btn",disabled:!r[o(353)]||d[o(353)],onClick:i,title:o(330)},o(343),8,d0)])])}}});var E=P;(function(h,t){for(var x=P,e=h();;)try{var s=parseInt(x(461))/1+parseInt(x(458))/2+-parseInt(x(463))/3+-parseInt(x(460))/4*(-parseInt(x(455))/5)+parseInt(x(457))/6+parseInt(x(462))/7+parseInt(x(464))/8*(-parseInt(x(465))/9);if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,185747);function B(){var h=["__scopeId","513012xOHXqH","403220IXBDMI","data-v-cb23dd70","45708AoVHEC","367318cHoHBt","2061745SWlcKx","16761hdHteP","1858072UYmOfy","36nLpplw","75ylRbHA"];return B=function(){return h},B()}function P(h,t){var x=B();return P=function(e,s){e=e-455;var r=x[e];return r},P(h,t)}const u0=K(l0,[[E(456),E(459)]]);export{u0 as A,K as _};
