import{d as j,r as M,c as E,o as z,a as Y,b as F,e as b,w as V,v as X,n as H,f as O,t as G}from"./vendor-BoK9dhAW.js";import{A as D,G as g,C as L,B as T}from"./vendor-pixi-js-eJjbzznQ.js";import{_ as m,m as N}from"./vendor-matter-js-CJ9hGwNN.js";import{G as Q,T as S}from"./vendor-tweenjs-BtMkXI7v.js";const Z=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};(function(h,t){const x=v,e=h();for(;;)try{if(parseInt(x(406))/1*(-parseInt(x(400))/2)+-parseInt(x(405))/3*(parseInt(x(401))/4)+-parseInt(x(407))/5*(parseInt(x(402))/6)+parseInt(x(404))/7+parseInt(x(412))/8*(parseInt(x(409))/9)+-parseInt(x(399))/10+-parseInt(x(403))/11*(-parseInt(x(411))/12)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,237859);function q(){const h=l=>{const f=v,d=l[f(410)]((n,a)=>n+a,0);return l[f(408)](n=>n/d)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function v(h,t){const x=R();return v=function(e,s){return e=e-399,x[e]},v(h,t)}function R(){const h=["4571250RlEZUx","12RLXAgA","20crvyru","54lXVTyT","11CJmDnN","1209677pjPzBQ","177144tEzUlK","51269RLjeWd","27235cEJhtl","map","668259vOYQTh","reduce","11415564EzNuAZ","24vBFUYn"];return R=function(){return h},R()}const K=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),i=y;(function(h,t){const x=y,e=h();for(;;)try{if(parseInt(x(337))/1*(-parseInt(x(383))/2)+parseInt(x(311))/3+parseInt(x(285))/4+-parseInt(x(287))/5*(parseInt(x(326))/6)+parseInt(x(321))/7*(-parseInt(x(391))/8)+-parseInt(x(288))/9+parseInt(x(363))/10*(parseInt(x(344))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,520539);function y(h,t){const x=C();return y=function(e,s){return e=e-282,x[e]},y(h,t)}function C(){const h=["world","pairs","72WIVHFp","getProbability","positionIterations","addChild","remove","addXPower","Composite","resBoxMap","res-text-","recordCount","roundShape","listenCollisions","canvas","startsWith","min","4025852YdfVfU","setGameRes","640nkBPPG","182079tLBOvR","ballConfig","appendChild","forEach","getBg","recordCallback","circleRadius","pinAnimal","nonCollideGroup","toFixed","low","frictionAir","destroy","text","init","boxWidth","maxCount","ticker","pinsGfx","setLevel","dealCollisions","tickerFn","rows","1716684wNFfjt","stage","floor","radius","setPopCb","Ball hit result box ","mouseout","gap","engine","Runner","511273CUJSXW","timeScale","app","entries","velocityIterations","47442ONSGhn","firstY","timing","rotation","getShadow","delete","ballRadius","parseInt","getChildByLabel","Bodies","style","1oRhNdn","stroke","devicePixelRatio","findResultArea","label","level","isNaN","17208697DeYyKa","center","now","createRoundedRect","children","mouseover","split","update","height","ballParamsMap","gameRes","length","circle","stackBox","popCallback","runner","clearPinsAndRes","row-","get","10mOAyKv","tweenGroup","set","Engine","position","Body","boxHeight","ball","pinParams","resBoxAnimal","lastTime","pinsMatter","roundRect","create","createResultBox","createBall","width","add","recordArr","clear","1865802YQSmky","removeChild","log","createElement","getText","fill"];return C=function(){return h},C()}const{colors:J,shadows:$,resText:U,probabilities:x0}=q();class t0{id=1;canvas;[i(323)];[i(319)];[i(389)];[i(359)];[i(379)];height;[i(309)];[i(353)]=new Map;[i(371)]={};[i(296)]=m[i(368)].nextGroup(!0);[i(289)]={ballRadius:4,frictionAir:.05};popCallback;[i(293)];gameRes;constructor(t){const x=i;this[x(282)]=document[x(386)](x(282)),t[x(290)](this[x(282)]),this.app=new D,this[x(319)]=m[x(366)][x(376)](),this.world=this[x(319)].world,this[x(359)]=m[x(320)][x(376)](),this.engine[x(393)]=10,this[x(319)][x(325)]=10,this[x(319)][x(328)][x(322)]=2}async[i(302)](t,x,e){const s=i;this[s(379)]=t,this[s(352)]=x,this[s(282)].style[s(379)]=t+"px",this[s(282)][s(336)][s(352)]=x+"px",this[s(357)][s(367)][s(365)](this[s(379)]-45,this.height/4),this[s(323)][s(312)][s(394)](this.stackBox),await this[s(323)][s(302)]({canvas:this[s(282)],width:t,height:x,background:e,antialias:!0,resolution:window[s(339)]}),m[s(320)].run(this[s(359)],this[s(319)]),this[s(402)]()}setBallConfig(t,x){this.ballConfig={ballRadius:t,frictionAir:x}}[i(378)](t){const x=i,e=this[x(379)]/2,s=[e,e+this[x(371)].gap],l=[e,e-this.pinParams[x(318)]],f=t[0],d=Math[x(313)](Math.random()*2),_=f==="R"?s[d]:l[d],n=m[x(335)][x(356)](_,0,this.ballConfig[x(332)],{id:this.id++,label:x(370),mass:1,restitution:0,friction:0,frictionAir:this[x(289)][x(299)],collisionFilter:{group:this[x(296)]}}),a=new g()[x(356)](0,0,this[x(289)].ballRadius)[x(388)](16733525);a[x(367)][x(365)](n.position.x,n.position.y),m[x(397)][x(380)](this[x(389)],n),this[x(323)][x(312)].addChild(a);const o=()=>{const c=x;a[c(367)][c(365)](n[c(367)].x,n[c(367)].y),a[c(329)]=n.angle;const p=(this[c(371)][c(310)]-2)*this[c(371)].gap+this[c(371)][c(318)]/2;n[c(367)].y>p&&(this[c(340)](n[c(367)].x),m[c(397)][c(395)](this[c(389)],n),a[c(300)](),this[c(323)][c(305)][c(395)](o),this[c(353)][c(331)](n.id))};this[x(323)][x(305)][x(380)](o);const r={path:t,start:d,fir:f};this[x(353)].set(n.id,r)}[i(374)]=[];[i(306)]=[];createPinsAndResultBoxes(t){const x=i;this[x(360)](),this[x(371)]=t;const{rows:e,startY:s,gap:l,pinRadius:f}=t;for(let d=2;d<e;d++){const _=d+1,n=(_-1)*l,a=this[x(379)]/2-n/2;for(let o=0;o<_;o++){const r=a+o*l,c=s+(d-2)*l,p=m[x(335)][x(356)](r,c,f,{isStatic:!0,label:x(361)+(d-1)+"-"+o}),u=new g().circle(0,0,f)[x(388)](16777215);u.x=r,u.y=c,this[x(374)].push(p),this[x(306)].push(u),N.Composite[x(380)](this.world,p),this[x(323)][x(312)][x(394)](u)}}this[x(377)]()}[i(308)](t){const x=i,{bodyA:e,bodyB:s}=t,l=e[x(341)]==="ball"?e:s.label===x(370)?s:null,f=e[x(341)].startsWith(x(361))?e.label:s[x(341)][x(283)]("row-")?s[x(341)]:null,d=e[x(341)][x(283)](x(361))?e:s[x(341)][x(283)](x(361))?s:null;if(d&&this[x(295)](d),!l||!f)return;const _=l.id,n=Number[x(333)](f[x(350)]("-")[1],10),a=this[x(353)][x(362)](_);if(!a)return;const{path:o,start:r,fir:c}=a;if(!o||!c||Number[x(343)](n))return;if(n===1){const u=c==="R"?r===0?1:-1:r===0?-1.2:1.2;this[x(396)](l,u);return}const p=o[n-1];p==="R"?this[x(396)](l,1.2):p==="L"&&this[x(396)](l,-1.2)}[i(398)]=new Map;[i(342)]=i(298);async[i(377)](){const t=i,x=this[t(371)].gap,e=x-2,s=this[t(371)][t(310)]-1,l=s-2,f=this.pinParams.startY+l*x+x/2,d=this[t(379)]/2-s*x/2,_=this[t(371)][t(310)]-2;for(let n=0;n<s;n++){const a=d+n*x+1,o=new L({label:"res-"+n,interactive:!0}),r=new g()[t(375)](0,0,e,14,2).fill({color:this[t(292)](_,n)}),c=new g()[t(375)](0,0,e,16,2)[t(388)]({color:this[t(330)](_,n)});c[t(367)][t(365)](0,0);const p=this[t(387)](this.level,_,n)||0,u=new T({label:t(399)+n,text:p+`
x`,style:{fontSize:14,fill:"#000",align:t(345)},anchor:.5});u[t(367)].set(e/2,8),u.scale[t(365)](.4),o[t(394)](c),o[t(394)](r),o[t(394)](u),o[t(367)][t(365)](a,f),this[t(398)][t(365)](n,o),this[t(323)][t(312)].addChild(o),o.on("mouseover",()=>{const I=t;this[I(358)](!0,this[I(392)](this[I(371)][I(310)]-2,n)[I(297)](4))}),o.on(t(317),()=>{this.popCallback(!1)})}}[i(360)](){const t=i;for(const x of this[t(374)])m[t(397)][t(395)](this.world,x);for(const x of this[t(306)])x[t(300)]();this[t(374)]=[],this[t(306)]=[],this[t(398)][t(291)](x=>{x[t(300)]()}),this[t(398)][t(382)](),this[t(327)]=0}[i(396)](t,x){N.Body.setVelocity(t,{x,y:0})}[i(292)](t,x){return J["_"+t][x]}[i(330)](t,x){return $["_"+t][x]}[i(387)](t,x,e){return U[t]["_"+x][e]}[i(392)](t,x){return x0["_"+t][x]*100}[i(315)](t){const x=i;this[x(358)]=t}setRecordClickCb(t){this.recordCallback=t}[i(307)](t){const x=i;if(this.level=t,!!U[t])for(const[s,l]of this.resBoxMap){const f=l[x(334)](x(399)+s),d=U[t]["_"+(this[x(371)][x(310)]-2)][s];f[x(301)]=d+`
x`}}[i(340)](t){const x=i;for(const[e,s]of this[x(398)][x(324)]()){const l=s.x,f=s.x+s[x(379)];t>=l&&t<=f&&(this.resBoxAnimal(s),console[x(385)](x(316)+e))}}listenCollisions(){N.Events.on(this.engine,"collisionStart",t=>{const x=y;for(const e of t[x(390)])this[x(308)](e)})}[i(295)](t){const x=i,e=new g;e.position[x(365)](t[x(367)].x,t[x(367)].y),this[x(323)][x(312)][x(394)](e);const s=0,l=10,f=400,d=performance[x(346)](),_=n=>{const a=x,o=n-d,r=Math[a(284)](o/f,1),c=s+(l-s)*r,p=.9*(1-r);e[a(382)]();const u=t[a(294)]??4;e.circle(0,0,u*1.2+c)[a(388)]({color:16777215,alpha:p}),r<1?requestAnimationFrame(_):e[a(300)]()};requestAnimationFrame(_)}firstY=0;[i(372)](t){const x=i,e=t[x(367)].y;this[x(327)]||(this[x(327)]=e);const s=4,l=150,f=performance[x(346)](),d=_=>{const n=x,a=_-f,o=Math[n(284)](a/l,1);t[n(367)].y=e+s*o,o<1?requestAnimationFrame(d):t.position.y=this[n(327)]};requestAnimationFrame(d)}[i(364)]=new Q;[i(381)]=[];[i(304)]=4;boxWidth=26;boxHeight=26;[i(357)]=new L;[i(400)]=0;[i(286)](t){const x=i;this[x(354)]=t}[i(347)](t,x,e){const s=i,l=e?.6:1,f=[{x:0,y:this[s(369)],radius:0},{x:this[s(303)],y:this[s(369)],radius:0},{x:this[s(303)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(f[2][s(314)]=4,f[3][s(314)]=4):t===this[s(304)]-1&&(f[0][s(314)]=4,f[1][s(314)]=4),new g({label:String(x)})[s(401)](f,10)[s(388)]({color:x,alpha:l})[s(338)]({width:1,color:0})}addRecord(t,x){const e=i,s=new L({interactive:!0});s[e(367)][e(365)](0,-this[e(369)]);const l=this.createRoundedRect(this[e(400)],x),f=new T({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});f[e(367)].x=this[e(303)]/2,f.position.y=this[e(369)]/2,s[e(394)](l),s.addChild(f),this[e(357)].addChild(s),this[e(381)].unshift(s);let d;s.on(e(349),()=>{const n=e;d=this.createRoundedRect(this[n(400)],0,!0),s.addChild(d)}),s.on(e(317),()=>{d&&(s.removeChild(d),d?.destroy(),d=null)}),s.on("click",()=>{const n=e;console[n(385)]("显示游戏结果事件"),this[n(293)]&&this.recordCallback()}),this[e(400)]++,this.recordCount===4&&(this[e(400)]=1),this[e(381)].forEach((n,a)=>{const o=e,r=a*this.boxHeight;if(this[o(381)][o(355)]>1){const c=this[o(381)][a],p=c[o(384)](c[o(348)][0]),u=p.label;p[o(300)](),this[o(381)][a][o(394)](this[o(347)](a,Number(u))),this.recordArr[a][o(348)].reverse()}new S(n.position,this[o(364)]).to({y:r},200).start()});const _=n=>{const a=e;this[a(364)][a(351)](n[a(373)])};if(this[e(381)][e(355)]>this.maxCount){const n=this[e(381)].pop();new S(n[e(367)],this[e(364)]).to({alpha:0},150).onComplete(()=>{const a=e;this[a(323)][a(305)][a(395)](_),this.stackBox[a(384)](n),n?.[a(300)]()}).start()}this.app.ticker[e(380)](_)}}const w=k;(function(h,t){const x=k,e=h();for(;;)try{if(parseInt(x(156))/1+-parseInt(x(122))/2*(parseInt(x(141))/3)+-parseInt(x(125))/4*(parseInt(x(124))/5)+-parseInt(x(130))/6*(-parseInt(x(144))/7)+parseInt(x(131))/8*(parseInt(x(167))/9)+-parseInt(x(132))/10*(-parseInt(x(149))/11)+-parseInt(x(145))/12===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,773419);function k(h,t){const x=B();return k=function(e,s){return e=e-120,x[e]},k(h,t)}const e0={class:w(157)},s0={class:w(157)},a0={class:w(133)},i0=["aria-invalid"],n0={class:w(121)},o0={key:0,id:w(128),class:w(146)},r0={class:"counter"},c0={class:"w-full flex justify-center items-center"},l0=[w(159)];function B(){const h=["test","createPinsAndResultBoxes","length","radius","AppPlinko","1474316dziwVg","relative","/10","disabled","ballConfig","value","当前 ","container","text","replace","setBallConfig","3030147mbYPgf","pins","hint-row","22ZaGjXi","仅允许填写字符 L 或 R","30EjnfNb","73732UDMbfU","split","characters","path-help","get","20214uyVOmT","8cNUHaM","310AhoHkz","input-wrap","createBall","start-btn","off","input","div","例如：LRRLLRLR","air","100857UfHMlR","span","false","3199FWMeIC","35057988GZigUX","help","input-control","label","292633KrUjYY","投球路径（10 位，仅 L/R）"];return B=function(){return h},B()}const f0=10,d0=j({__name:w(155),setup(h){const t=w,x=M(null);let e;const s=M(""),l=E(()=>/^[LR]{10}$/[t(151)](s.value)),f=M(!1),d=E(()=>{const a=t;return s[a(161)]?/[^LR]/[a(151)](s[a(161)])?a(123):s[a(161)][a(153)]!==10?a(162)+s[a(161)][a(153)]+" 位，请填写 10 位":"":"请输入 10 位路径，仅允许 L 或 R"});function _(a){const o=t,r=a.target,c=r[o(161)].toUpperCase()[o(165)](/[^LR]/g,"").slice(0,10);s.value=c}async function n(){const a=t;if(!l[a(161)]||f[a(161)]||!e)return;f[a(161)]=!0;const o=s[a(161)][a(126)]("");e[a(134)](o),setTimeout(()=>f[a(161)]=!1,400)}return z(async()=>{const a=t,o=K[a(129)](10);x[a(161)]&&(e=new t0(x[a(161)]),await e.init(300,276,"#1e1e1e"),await e[a(152)](o?.[a(120)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(166)](o?.[a(160)][a(154)],o?.[a(160)][a(140)]))}),(a,o)=>{const r=t;return F(),Y(r(138),e0,[b(r(138),s0,[b(r(138),{ref_key:r(163),ref:x,class:"container"},null,512)]),b(r(138),a0,[o[1]||(o[1]=b(r(148),{class:"label",for:"path"},r(150),-1)),V(b(r(137),{id:"path",class:H([r(147),{invalid:!l[r(161)]&&s[r(161)]}]),type:r(164),"onUpdate:modelValue":o[0]||(o[0]=c=>s[r(161)]=c),maxlength:f0,placeholder:r(139),onInput:_,autocomplete:r(136),autocapitalize:r(127),spellcheck:r(143),"aria-describedby":r(128),"aria-invalid":!l[r(161)]},null,42,i0),[[X,s.value]]),b(r(138),n0,[d.value?(F(),Y("span",o0,G(d.value),1)):O("",!0),b(r(142),r0,G(s[r(161)][r(153)])+r(158),1)])]),b("div",c0,[b("button",{class:r(135),disabled:!l.value||f[r(161)],onClick:n,title:"2 秒允许点击一次"}," 开始游戏 ",8,l0)])])}}});var W=A;function A(h,t){var x=P();return A=function(e,s){e=e-344;var l=x[e];return l},A(h,t)}(function(h,t){for(var x=A,e=h();;)try{var s=-parseInt(x(344))/1*(-parseInt(x(350))/2)+parseInt(x(351))/3+-parseInt(x(346))/4+parseInt(x(352))/5*(-parseInt(x(353))/6)+parseInt(x(349))/7*(parseInt(x(347))/8)+parseInt(x(345))/9+-parseInt(x(348))/10;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(P,725400);function P(){var h=["data-v-cb23dd70","3xvNQRZ","9244899zIdWRD","1651912XlWjOj","24eVdPvh","14580430rjQltg","872305epXHfm","874614UWFbma","3111069pLyUhE","1115kiAyXv","31038ueNmEs","__scopeId"];return P=function(){return h},P()}const b0=Z(d0,[[W(354),W(355)]]);export{b0 as A,Z as _};
