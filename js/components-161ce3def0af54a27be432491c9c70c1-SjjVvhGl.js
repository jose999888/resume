import{d as E,r as M,c as L,o as z,a as T,b as N,e as w,w as H,v as K,n as U,f as Y,t as S}from"./vendor-B53ZnZId.js";import{A as j,G as I,C as F,B as q}from"./vendor-pixi-js-CbWXL6N4.js";import{_ as u,m as Z}from"./vendor-matter-js-BPzui2TA.js";import{G as D,T as W}from"./vendor-tweenjs-BtMkXI7v.js";const V=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function y(h,t){const x=v();return y=function(e,s){return e=e-144,x[e]},y(h,t)}(function(h,t){const x=y,e=h();for(;;)try{if(-parseInt(x(149))/1+parseInt(x(145))/2*(parseInt(x(144))/3)+parseInt(x(153))/4+-parseInt(x(152))/5*(-parseInt(x(148))/6)+parseInt(x(151))/7+-parseInt(x(147))/8*(-parseInt(x(154))/9)+-parseInt(x(146))/10===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(v,178425);function J(){const h=r=>{const l=y,f=r.reduce((n,a)=>n+a,0);return r[l(150)](n=>n/f)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const X=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function v(){const h=["432019iiPsAZ","470WLOdJQ","1414680vqaFwo","1978443JuHRRv","819543Ujbclt","2gnnJyN","5807940lufqcB","8kUYACj","8274UuzPeT","278802RZfdGf","map"];return v=function(){return h},v()}const i=g;(function(h,t){const x=g,e=h();for(;;)try{if(parseInt(x(233))/1+-parseInt(x(289))/2*(parseInt(x(325))/3)+-parseInt(x(272))/4*(parseInt(x(324))/5)+parseInt(x(312))/6+parseInt(x(323))/7*(parseInt(x(229))/8)+-parseInt(x(302))/9*(-parseInt(x(284))/10)+-parseInt(x(295))/11*(parseInt(x(243))/12)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,768604);const{colors:O,shadows:Q,resText:G,probabilities:$}=J();function g(h,t){const x=C();return g=function(e,s){return e=e-201,x[e]},g(h,t)}class x0{id=1;[i(236)];[i(290)];[i(280)];[i(273)];[i(291)];[i(209)];height;[i(303)];[i(208)]=new Map;[i(266)]={};nonCollideGroup=u[i(261)][i(264)](!0);ballConfig={ballRadius:4,frictionAir:.05};popCallback;[i(296)];[i(228)];constructor(t){const x=i;this[x(236)]=document.createElement(x(236)),t[x(331)](this[x(236)]),this.app=new j,this[x(280)]=u[x(276)][x(217)](),this.world=this[x(280)][x(273)],this[x(291)]=u[x(248)].create(),this[x(280)][x(205)]=10,this[x(280)].velocityIterations=10,this[x(280)][x(283)][x(330)]=2}async[i(219)](t,x,e){const s=i;this[s(209)]=t,this[s(267)]=x,this[s(236)].style[s(209)]=t+"px",this.canvas[s(317)][s(267)]=x+"px",this[s(231)].position[s(207)](this[s(209)]-45,this.height/4),this[s(290)][s(313)][s(287)](this[s(231)]),await this[s(290)][s(219)]({canvas:this[s(236)],width:t,height:x,background:e,antialias:!0,resolution:window[s(269)]}),u[s(248)].run(this[s(291)],this[s(280)]),this[s(238)]()}[i(281)](t,x){const e=i;this[e(311)]={ballRadius:t,frictionAir:x}}[i(274)](t){const x=i,e=this[x(209)]/2,s=[e,e+this[x(266)][x(212)]],r=[e,e-this[x(266)][x(212)]],l=t[0],f=Math[x(326)](Math[x(262)]()*2),_=l==="R"?s[f]:r[f],n=u[x(297)][x(220)](_,0,this[x(311)][x(327)],{id:this.id++,label:"ball",mass:1,restitution:0,friction:0,frictionAir:this[x(311)][x(294)],collisionFilter:{group:this[x(245)]}}),a=new I()[x(220)](0,0,this[x(311)].ballRadius)[x(251)](16733525);a[x(263)][x(207)](n[x(263)].x,n[x(263)].y),u[x(234)].add(this[x(273)],n),this[x(290)][x(313)][x(287)](a);const c=()=>{const d=x;a[d(263)][d(207)](n[d(263)].x,n[d(263)].y),a.rotation=n[d(329)];const b=(this.pinParams[d(240)]-2)*this.pinParams[d(212)]+this[d(266)][d(212)]/2;n[d(263)].y>b&&(this[d(300)](n.position.x),u[d(234)][d(316)](this.world,n),a[d(260)](),this[d(290)][d(213)][d(316)](c),this[d(208)][d(288)](n.id))};this.app.ticker[x(282)](c);const o={path:t,start:f,fir:l};this[x(208)][x(207)](n.id,o)}pinsMatter=[];[i(223)]=[];[i(226)](t){const x=i;this[x(318)](),this[x(266)]=t;const{rows:e,startY:s,gap:r,pinRadius:l}=t;for(let f=2;f<e;f++){const _=f+1,n=(_-1)*r,a=this[x(209)]/2-n/2;for(let c=0;c<_;c++){const o=a+c*r,d=s+(f-2)*r,b=u[x(297)][x(220)](o,d,l,{isStatic:!0,label:x(247)+(f-1)+"-"+c}),p=new I().circle(0,0,l)[x(251)](16777215);p.x=o,p.y=d,this[x(278)][x(308)](b),this.pinsGfx[x(308)](p),u[x(234)][x(282)](this[x(273)],b),this.app[x(313)][x(287)](p)}}this.createResultBox()}[i(304)](t){const x=i,{bodyA:e,bodyB:s}=t,r=e[x(332)]===x(322)?e:s.label===x(322)?s:null,l=e[x(332)][x(258)](x(247))?e[x(332)]:s[x(332)][x(258)](x(247))?s[x(332)]:null,f=e.label[x(258)]("row-")?e:s[x(332)][x(258)]("row-")?s:null;if(f&&this[x(241)](f),!r||!l)return;const _=r.id,n=Number[x(253)](l[x(306)]("-")[1],10),a=this[x(208)].get(_);if(!a)return;const{path:c,start:o,fir:d}=a;if(!c||!d||Number.isNaN(n))return;if(n===1){const p=d==="R"?o===0?1:-1:o===0?-1.2:1.2;this.addXPower(r,p);return}const b=c[n-1];b==="R"?this.addXPower(r,1.2):b==="L"&&this[x(305)](r,-1.2)}[i(265)]=new Map;level=i(315);async[i(301)](){const t=i,x=this[t(266)][t(212)],e=x-2,s=this[t(266)][t(240)]-1,r=s-2,l=this[t(266)][t(328)]+r*x+x/2,f=this[t(209)]/2-s*x/2,_=this.pinParams[t(240)]-2;for(let n=0;n<s;n++){const a=f+n*x+1,c=new F({label:t(309)+n,interactive:!0}),o=new I()[t(224)](0,0,e,14,2)[t(251)]({color:this[t(268)](_,n)}),d=new I().roundRect(0,0,e,16,2)[t(251)]({color:this[t(201)](_,n)});d[t(263)][t(207)](0,0);const b=this[t(310)](this[t(286)],_,n)||0,p=new q({label:"res-text-"+n,text:b+`
x`,style:{fontSize:14,fill:t(214),align:t(279)},anchor:.5});p.position[t(207)](e/2,8),p.scale.set(.4),c[t(287)](d),c.addChild(o),c[t(287)](p),c[t(263)][t(207)](a,l),this[t(265)][t(207)](n,c),this[t(290)].stage.addChild(c),c.on(t(221),()=>{const R=t;this[R(222)](!0,this.getProbability(this[R(266)][R(240)]-2,n)[R(246)](4))}),c.on("mouseout",()=>{this.popCallback(!1)})}}[i(318)](){const t=i;for(const x of this[t(278)])u[t(234)].remove(this[t(273)],x);for(const x of this.pinsGfx)x[t(260)]();this.pinsMatter=[],this[t(223)]=[],this[t(265)][t(230)](x=>{x.destroy()}),this[t(265)][t(277)](),this[t(244)]=0}[i(305)](t,x){const e=i;u[e(261)][e(256)](t,{x,y:0})}[i(268)](t,x){return O["_"+t][x]}[i(201)](t,x){return Q["_"+t][x]}[i(310)](t,x,e){return G[t]["_"+x][e]}[i(259)](t,x){return $["_"+t][x]*100}[i(218)](t){const x=i;this[x(222)]=t}setRecordClickCb(t){this.recordCallback=t}[i(204)](t){const x=i;if(this[x(286)]=t,!!G[t])for(const[s,r]of this[x(265)]){const l=r[x(203)](x(237)+s),f=G[t]["_"+(this[x(266)][x(240)]-2)][s];l[x(292)]=f+`
x`}}[i(300)](t){const x=i;for(const[e,s]of this[x(265)][x(314)]()){const r=s.x,l=s.x+s[x(209)];t>=r&&t<=l&&(this[x(255)](s),console[x(252)](x(285)+e))}}listenCollisions(){const t=i;Z.Events.on(this[t(280)],t(307),x=>{for(const e of x.pairs)this.dealCollisions(e)})}[i(241)](t){const x=i,e=new I;e[x(263)][x(207)](t[x(263)].x,t[x(263)].y),this[x(290)][x(313)][x(287)](e);const s=0,r=10,l=400,f=performance.now(),_=n=>{const a=x,c=n-f,o=Math[a(202)](c/l,1),d=s+(r-s)*o,b=.9*(1-o);e[a(277)]();const p=t[a(270)]??4;e.circle(0,0,p*1.2+d)[a(251)]({color:16777215,alpha:b}),o<1?requestAnimationFrame(_):e[a(260)]()};requestAnimationFrame(_)}[i(244)]=0;[i(255)](t){const x=i,e=t[x(263)].y;this[x(244)]||(this.firstY=e);const s=4,r=150,l=performance[x(215)](),f=_=>{const n=x,a=_-l,c=Math[n(202)](a/r,1);t.position.y=e+s*c,c<1?requestAnimationFrame(f):t[n(263)].y=this[n(244)]};requestAnimationFrame(f)}tweenGroup=new D;[i(293)]=[];[i(225)]=4;boxWidth=26;[i(211)]=26;[i(231)]=new F;[i(249)]=0;[i(298)](t){const x=i;this[x(228)]=t}[i(227)](t,x,e){const s=i,r=e?.6:1,l=[{x:0,y:this[s(211)],radius:0},{x:this.boxWidth,y:this[s(211)],radius:0},{x:this[s(250)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(l[2].radius=4,l[3][s(216)]=4):t===this[s(225)]-1&&(l[0][s(216)]=4,l[1][s(216)]=4),new I({label:String(x)})[s(242)](l,10).fill({color:x,alpha:r})[s(320)]({width:1,color:0})}[i(299)](t,x){const e=i,s=new F({interactive:!0});s[e(263)][e(207)](0,-this[e(211)]);const r=this[e(227)](this[e(249)],x),l=new q({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});l[e(263)].x=this.boxWidth/2,l[e(263)].y=this.boxHeight/2,s[e(287)](r),s.addChild(l),this[e(231)][e(287)](s),this[e(293)][e(275)](s);let f;s.on(e(221),()=>{const n=e;f=this[n(227)](this.recordCount,0,!0),s[n(287)](f)}),s.on(e(235),()=>{f&&(s.removeChild(f),f?.destroy(),f=null)}),s.on(e(319),()=>{const n=e;console[n(252)](n(239)),this.recordCallback&&this.recordCallback()}),this.recordCount++,this[e(249)]===4&&(this[e(249)]=1),this[e(293)][e(230)]((n,a)=>{const c=e,o=a*this.boxHeight;if(this[c(293)][c(257)]>1){const d=this[c(293)][a],b=d.removeChild(d[c(271)][0]),p=b.label;b[c(260)](),this[c(293)][a][c(287)](this[c(227)](a,Number(p))),this.recordArr[a][c(271)][c(232)]()}new W(n[c(263)],this.tweenGroup).to({y:o},200)[c(206)]()});const _=n=>{const a=e;this[a(321)][a(210)](n[a(254)])};if(this.recordArr[e(257)]>this[e(225)]){const n=this[e(293)].pop();new W(n[e(263)],this[e(321)]).to({alpha:0},150).onComplete(()=>{const a=e;this[a(290)][a(213)][a(316)](_),this.stackBox.removeChild(n),n?.destroy()})[e(206)]()}this[e(290)][e(213)][e(282)](_)}}function C(){const h=["circleRadius","children","4wrSSvN","world","createBall","unshift","Engine","clear","pinsMatter","center","engine","setBallConfig","add","timing","26350sKKuKA","Ball hit result box ","level","addChild","delete","596wpzFWG","app","runner","text","recordArr","frictionAir","810073toLxrK","recordCallback","Bodies","setGameRes","addRecord","findResultArea","createResultBox","1017WprKTF","tickerFn","dealCollisions","addXPower","split","collisionStart","push","res-","getText","ballConfig","11232HRWaVY","stage","entries","low","remove","style","clearPinsAndRes","click","stroke","tweenGroup","ball","1248723nqzKhB","1611530tlTZRf","3228tvBlPm","floor","ballRadius","startY","angle","timeScale","appendChild","label","getShadow","min","getChildByLabel","setLevel","positionIterations","start","set","ballParamsMap","width","update","boxHeight","gap","ticker","#000","now","radius","create","setPopCb","init","circle","mouseover","popCallback","pinsGfx","roundRect","maxCount","createPinsAndResultBoxes","createRoundedRect","gameRes","56pNbcEv","forEach","stackBox","reverse","1115139ucqAqb","Composite","mouseout","canvas","res-text-","listenCollisions","显示游戏结果事件","rows","pinAnimal","roundShape","204xUnkyF","firstY","nonCollideGroup","toFixed","row-","Runner","recordCount","boxWidth","fill","log","parseInt","lastTime","resBoxAnimal","setVelocity","length","startsWith","getProbability","destroy","Body","random","position","nextGroup","resBoxMap","pinParams","height","getBg","devicePixelRatio"];return C=function(){return h},C()}const m=k;(function(h,t){const x=k,e=h();for(;;)try{if(parseInt(x(187))/1*(parseInt(x(158))/2)+-parseInt(x(197))/3*(parseInt(x(191))/4)+parseInt(x(173))/5+-parseInt(x(161))/6*(parseInt(x(200))/7)+-parseInt(x(199))/8*(parseInt(x(189))/9)+parseInt(x(198))/10*(-parseInt(x(192))/11)+parseInt(x(166))/12===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(A,155602);function k(h,t){const x=A();return k=function(e,s){return e=e-155,x[e]},k(h,t)}function A(){const h=["relative","input-wrap","container","slice","length","target","1185525NAExhl","/10","false","radius","hint-row","label","w-full flex justify-center items-center","characters"," 开始游戏 ","air","ballConfig","button","投球路径（10 位，仅 L/R）","help","6zbekFF","setBallConfig","9036hjoycd","请输入 10 位路径，仅允许 L 或 R","345924iRKDFt","11IHHcDt","path-help","test","AppPlinko","get","9bWcbWI","1604310wxjgkR","16dMnqkX","557011EPneVC","#1e1e1e","text","仅允许填写字符 L 或 R","init","value","path","90722yRStlZ","pins","span","12fYjMww","div","当前 "," 位，请填写 10 位","disabled","2728308jSRfsF"];return A=function(){return h},A()}const t0={class:m(167)},e0={class:m(167)},s0={class:m(168)},a0=["aria-invalid"],i0={class:m(177)},n0={key:0,id:m(193),class:m(186)},c0={class:"counter"},o0={class:m(179)},r0=[m(165)],d0=10,l0=E({__name:m(195),setup(h){const t=m,x=M(null);let e;const s=M(""),r=L(()=>/^[LR]{10}$/[t(194)](s[t(156)])),l=M(!1),f=L(()=>{const a=t;return s.value?/[^LR]/[a(194)](s.value)?a(203):s.value[a(171)]!==10?a(163)+s[a(156)][a(171)]+a(164):"":a(190)});function _(a){const c=t,o=a[c(172)],d=o[c(156)].toUpperCase().replace(/[^LR]/g,"")[c(170)](0,10);s[c(156)]=d}async function n(){const a=t;if(!r.value||l[a(156)]||!e)return;l[a(156)]=!0;const c=s.value.split("");e.createBall(c),setTimeout(()=>l[a(156)]=!1,400)}return z(async()=>{const a=t,c=X[a(196)](10);x[a(156)]&&(e=new x0(x[a(156)]),await e[a(155)](300,276,a(201)),await e.createPinsAndResultBoxes(c?.[a(159)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(188)](c?.ballConfig[a(176)],c?.[a(183)][a(182)]))}),(a,c)=>{const o=t;return N(),T(o(162),t0,[w(o(162),e0,[w(o(162),{ref_key:"container",ref:x,class:o(169)},null,512)]),w(o(162),s0,[c[1]||(c[1]=w("label",{class:o(178),for:o(157)},o(185),-1)),H(w("input",{id:o(157),class:U(["input-control",{invalid:!r[o(156)]&&s.value}]),type:o(202),"onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d),maxlength:d0,placeholder:"例如：LRRLLRLR",onInput:_,autocomplete:"off",autocapitalize:o(180),spellcheck:o(175),"aria-describedby":o(193),"aria-invalid":!r.value},null,42,a0),[[K,s[o(156)]]]),w(o(162),i0,[f[o(156)]?(N(),T(o(160),n0,S(f[o(156)]),1)):Y("",!0),w(o(160),c0,S(s[o(156)][o(171)])+o(174),1)])]),w("div",o0,[w(o(184),{class:"start-btn",disabled:!r.value||l[o(156)],onClick:n,title:"2 秒允许点击一次"},o(181),8,r0)])])}}});var f0=P;(function(h,t){for(var x=P,e=h();;)try{var s=parseInt(x(309))/1*(-parseInt(x(308))/2)+parseInt(x(315))/3+parseInt(x(305))/4*(-parseInt(x(316))/5)+parseInt(x(307))/6*(parseInt(x(313))/7)+-parseInt(x(310))/8*(parseInt(x(314))/9)+parseInt(x(306))/10*(parseInt(x(303))/11)+parseInt(x(304))/12*(parseInt(x(312))/13);if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,832107);function B(){var h=["11120718AEyGTZ","3137427JIiHHr","1709307MeuDfR","2705XNcbNu","44enigpl","2255556WhORUh","6404RqkrRR","304070Rfoijc","6TzJZTt","2FCNBcq","421183wDLoUy","8RZOnKT","data-v-cb23dd70","13mNKuUp"];return B=function(){return h},B()}function P(h,t){var x=B();return P=function(e,s){e=e-303;var r=x[e];return r},P(h,t)}const u0=V(l0,[["__scopeId",f0(311)]]);export{u0 as A,V as _};
