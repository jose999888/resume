import{d as U,r as P,c as S,o as Y,a as T,b as F,e as w,w as z,v as H,n as J,f as O,t as X}from"./vendor-DuHv1zwE.js";import{A as D,G as v,C as L,B as W}from"./vendor-pixi-js-COWPr9yY.js";import{_ as u,m as q}from"./vendor-matter-js-E1M3VW_R.js";import{G as V,T as E}from"./vendor-tweenjs-BtMkXI7v.js";const Z=(f,t)=>{const x=f.__vccOpts||f;for(const[e,s]of t)x[e]=s;return x};function C(){const f=["2497768PWkXxr","6dvpAtW","3397376towmJF","1636744FcRWTj","1262372KMRxhz","15bSXUWo","520646ZjlyOp","1833765pftxuX","29919762IdlbVm","map"];return C=function(){return f},C()}(function(f,t){const x=I,e=f();for(;;)try{if(-parseInt(x(196))/1+parseInt(x(198))/2*(-parseInt(x(197))/3)+parseInt(x(195))/4+parseInt(x(199))/5*(-parseInt(x(193))/6)+parseInt(x(192))/7+-parseInt(x(194))/8+parseInt(x(200))/9===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,735016);function K(){const f=c=>{const l=I,h=c.reduce((n,a)=>n+a,0);return c[l(201)](n=>n/h)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:f([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function I(f,t){const x=C();return I=function(e,s){return e=e-192,x[e]},I(f,t)}const j=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),i=y;(function(f,t){const x=y,e=f();for(;;)try{if(parseInt(x(150))/1+-parseInt(x(207))/2*(parseInt(x(191))/3)+parseInt(x(156))/4+-parseInt(x(158))/5+-parseInt(x(227))/6*(parseInt(x(121))/7)+-parseInt(x(215))/8*(-parseInt(x(175))/9)+parseInt(x(152))/10===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,728458);function y(f,t){const x=R();return y=function(e,s){return e=e-108,x[e]},y(f,t)}const{colors:Q,shadows:$,resText:G,probabilities:x0}=K();function R(){const f=["addXPower","setPopCb","maxCount","pinParams","clear","create","res-","17726XyXoHD","listenCollisions","engine","circleRadius","log","push","boxWidth","pairs","32EUqfgA","canvas","createBall","mouseover","floor","unshift","run","boxHeight","destroy","dealCollisions","mouseout","Body","6CruOUt","positionIterations","Bodies","min","start","click","lastTime","res-text-","roundRect","devicePixelRatio","firstY","addChild","runner","stackBox","update","recordCallback","stroke","显示游戏结果事件","world","getText","rotation","2728474JTSaWC","Events","init","popCallback","nonCollideGroup","pop","startsWith","children","radius","text","collisionStart","app","set","onComplete","forEach","angle","style","createElement","level","pinsMatter","get","label","Runner","setVelocity","split","removeChild","gap","height","tickerFn","530850IMzYPm","pinsGfx","6408760CLuBIl","ticker","recordArr","delete","2695760jRFPlk","nextGroup","2121915sJTvFY","stage","getProbability","add","fill","gameRes","setLevel","startY","center","addRecord","ballRadius","width","pinAnimal","velocityIterations","row-","getChildByLabel","remove","2050173SBxdxo","findResultArea","circle","resBoxMap","position","setGameRes","getShadow","rows","tweenGroup","ball","toFixed","frictionAir","Composite","recordCount","now","createRoundedRect","411NiYVXs","clearPinsAndRes","roundShape","ballConfig","entries","Engine","getBg","setRecordClickCb","ballParamsMap"];return R=function(){return f},R()}class t0{id=1;[i(216)];[i(132)];engine;[i(118)];[i(112)];[i(169)];[i(148)];[i(149)];[i(199)]=new Map;[i(203)]={};[i(125)]=u[i(226)][i(157)](!0);[i(194)]={ballRadius:4,frictionAir:.05};[i(124)];[i(115)];[i(163)];constructor(t){const x=i;this.canvas=document[x(138)](x(216)),t.appendChild(this[x(216)]),this[x(132)]=new D,this[x(209)]=u[x(196)][x(205)](),this[x(118)]=this[x(209)][x(118)],this[x(112)]=u[x(143)][x(205)](),this[x(209)][x(228)]=10,this[x(209)][x(171)]=10,this[x(209)].timing.timeScale=2}async[i(123)](t,x,e){const s=i;this[s(169)]=t,this[s(148)]=x,this.canvas[s(137)][s(169)]=t+"px",this[s(216)][s(137)].height=x+"px",this[s(113)].position.set(this[s(169)]-45,this[s(148)]/4),this[s(132)][s(159)][s(111)](this.stackBox),await this.app[s(123)]({canvas:this.canvas,width:t,height:x,background:e,antialias:!0,resolution:window[s(109)]}),u[s(143)][s(221)](this[s(112)],this.engine),this[s(208)]()}setBallConfig(t,x){this.ballConfig={ballRadius:t,frictionAir:x}}[i(217)](t){const x=i,e=this[x(169)]/2,s=[e,e+this[x(203)][x(147)]],c=[e,e-this.pinParams[x(147)]],l=t[0],h=Math[x(219)](Math.random()*2),_=l==="R"?s[h]:c[h],n=u[x(229)][x(177)](_,0,this.ballConfig[x(168)],{id:this.id++,label:x(184),mass:1,restitution:0,friction:0,frictionAir:this[x(194)][x(186)],collisionFilter:{group:this[x(125)]}}),a=new v()[x(177)](0,0,this[x(194)][x(168)])[x(162)](16733525);a[x(179)][x(133)](n[x(179)].x,n.position.y),u[x(187)][x(161)](this.world,n),this[x(132)][x(159)][x(111)](a);const r=()=>{const d=x;a[d(179)][d(133)](n[d(179)].x,n[d(179)].y),a[d(120)]=n[d(136)];const b=(this[d(203)].rows-2)*this[d(203)][d(147)]+this.pinParams[d(147)]/2;n[d(179)].y>b&&(this.findResultArea(n[d(179)].x),u[d(187)][d(174)](this[d(118)],n),a[d(223)](),this[d(132)][d(153)][d(174)](r),this.ballParamsMap[d(155)](n.id))};this[x(132)][x(153)].add(r);const o={path:t,start:h,fir:l};this[x(199)][x(133)](n.id,o)}[i(140)]=[];[i(151)]=[];createPinsAndResultBoxes(t){const x=i;this[x(192)](),this.pinParams=t;const{rows:e,startY:s,gap:c,pinRadius:l}=t;for(let h=2;h<e;h++){const _=h+1,n=(_-1)*c,a=this[x(169)]/2-n/2;for(let r=0;r<_;r++){const o=a+r*c,d=s+(h-2)*c,b=u[x(229)][x(177)](o,d,l,{isStatic:!0,label:x(172)+(h-1)+"-"+r}),p=new v()[x(177)](0,0,l)[x(162)](16777215);p.x=o,p.y=d,this[x(140)].push(b),this[x(151)][x(212)](p),u[x(187)].add(this[x(118)],b),this[x(132)][x(159)][x(111)](p)}}this.createResultBox()}[i(224)](t){const x=i,{bodyA:e,bodyB:s}=t,c=e.label===x(184)?e:s.label===x(184)?s:null,l=e[x(142)][x(127)]("row-")?e[x(142)]:s[x(142)][x(127)](x(172))?s[x(142)]:null,h=e[x(142)][x(127)](x(172))?e:s.label.startsWith("row-")?s:null;if(h&&this[x(170)](h),!c||!l)return;const _=c.id,n=Number.parseInt(l[x(145)]("-")[1],10),a=this[x(199)][x(141)](_);if(!a)return;const{path:r,start:o,fir:d}=a;if(!r||!d||Number.isNaN(n))return;if(n===1){const p=d==="R"?o===0?1:-1:o===0?-1.2:1.2;this.addXPower(c,p);return}const b=r[n-1];b==="R"?this[x(200)](c,1.2):b==="L"&&this[x(200)](c,-1.2)}[i(178)]=new Map;[i(139)]="low";async createResultBox(){const t=i,x=this[t(203)].gap,e=x-2,s=this[t(203)][t(182)]-1,c=s-2,l=this[t(203)][t(165)]+c*x+x/2,h=this[t(169)]/2-s*x/2,_=this[t(203)][t(182)]-2;for(let n=0;n<s;n++){const a=h+n*x+1,r=new L({label:t(206)+n,interactive:!0}),o=new v()[t(108)](0,0,e,14,2)[t(162)]({color:this[t(197)](_,n)}),d=new v()[t(108)](0,0,e,16,2)[t(162)]({color:this.getShadow(_,n)});d.position[t(133)](0,0);const b=this.getText(this[t(139)],_,n)||0,p=new W({label:t(234)+n,text:b+`
x`,style:{fontSize:14,fill:"#000",align:t(166)},anchor:.5});p[t(179)].set(e/2,8),p.scale[t(133)](.4),r[t(111)](d),r.addChild(o),r.addChild(p),r[t(179)][t(133)](a,l),this[t(178)][t(133)](n,r),this[t(132)].stage.addChild(r),r.on(t(218),()=>{const g=t;this[g(124)](!0,this[g(160)](this[g(203)][g(182)]-2,n)[g(185)](4))}),r.on("mouseout",()=>{this[t(124)](!1)})}}[i(192)](){const t=i;for(const x of this.pinsMatter)q.Composite[t(174)](this.world,x);for(const x of this.pinsGfx)x.destroy();this[t(140)]=[],this.pinsGfx=[],this.resBoxMap[t(135)](x=>{x[t(223)]()}),this.resBoxMap[t(204)](),this[t(110)]=0}[i(200)](t,x){const e=i;q.Body[e(144)](t,{x,y:0})}[i(197)](t,x){return Q["_"+t][x]}[i(181)](t,x){return $["_"+t][x]}[i(119)](t,x,e){return G[t]["_"+x][e]}[i(160)](t,x){return x0["_"+t][x]*100}[i(201)](t){const x=i;this[x(124)]=t}[i(198)](t){this.recordCallback=t}[i(164)](t){const x=i;if(this.level=t,!!G[t])for(const[s,c]of this[x(178)]){const l=c[x(173)](x(234)+s),h=G[t]["_"+(this.pinParams.rows-2)][s];l[x(130)]=h+`
x`}}[i(176)](t){const x=i;for(const[e,s]of this.resBoxMap[x(195)]()){const c=s.x,l=s.x+s[x(169)];t>=c&&t<=l&&(this.resBoxAnimal(s),console[x(211)]("Ball hit result box "+e))}}[i(208)](){const t=i;u[t(122)].on(this[t(209)],t(131),x=>{const e=t;for(const s of x[e(214)])this[e(224)](s)})}[i(170)](t){const x=i,e=new v;e[x(179)][x(133)](t.position.x,t[x(179)].y),this[x(132)][x(159)][x(111)](e);const s=0,c=10,l=400,h=performance[x(189)](),_=n=>{const a=x,r=n-h,o=Math[a(230)](r/l,1),d=s+(c-s)*o,b=.9*(1-o);e[a(204)]();const p=t[a(210)]??4;e[a(177)](0,0,p*1.2+d)[a(162)]({color:16777215,alpha:b}),o<1?requestAnimationFrame(_):e[a(223)]()};requestAnimationFrame(_)}[i(110)]=0;resBoxAnimal(t){const x=i,e=t[x(179)].y;this[x(110)]||(this.firstY=e);const s=4,c=150,l=performance[x(189)](),h=_=>{const n=x,a=_-l,r=Math[n(230)](a/c,1);t[n(179)].y=e+s*r,r<1?requestAnimationFrame(h):t[n(179)].y=this[n(110)]};requestAnimationFrame(h)}[i(183)]=new V;recordArr=[];[i(202)]=4;[i(213)]=26;[i(222)]=26;[i(113)]=new L;[i(188)]=0;[i(180)](t){this.gameRes=t}[i(190)](t,x,e){const s=i,c=e?.6:1,l=[{x:0,y:this.boxHeight,radius:0},{x:this[s(213)],y:this[s(222)],radius:0},{x:this[s(213)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(l[2][s(129)]=4,l[3][s(129)]=4):t===this[s(202)]-1&&(l[0].radius=4,l[1][s(129)]=4),new v({label:String(x)})[s(193)](l,10)[s(162)]({color:x,alpha:c})[s(116)]({width:1,color:0})}[i(167)](t,x){const e=i,s=new L({interactive:!0});s[e(179)][e(133)](0,-this.boxHeight);const c=this[e(190)](this.recordCount,x),l=new W({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});l[e(179)].x=this[e(213)]/2,l[e(179)].y=this[e(222)]/2,s.addChild(c),s.addChild(l),this[e(113)][e(111)](s),this[e(154)][e(220)](s);let h;s.on("mouseover",()=>{const n=e;h=this.createRoundedRect(this.recordCount,0,!0),s[n(111)](h)}),s.on(e(225),()=>{h&&(s.removeChild(h),h?.destroy(),h=null)}),s.on(e(232),()=>{const n=e;console[n(211)](n(117)),this[n(115)]&&this.recordCallback()}),this[e(188)]++,this.recordCount===4&&(this[e(188)]=1),this.recordArr[e(135)]((n,a)=>{const r=e,o=a*this[r(222)];if(this.recordArr.length>1){const d=this.recordArr[a],b=d[r(146)](d[r(128)][0]),p=b.label;b[r(223)](),this[r(154)][a].addChild(this[r(190)](a,Number(p))),this[r(154)][a].children.reverse()}new E(n[r(179)],this[r(183)]).to({y:o},200)[r(231)]()});const _=n=>{const a=e;this[a(183)][a(114)](n[a(233)])};if(this.recordArr.length>this.maxCount){const n=this[e(154)][e(126)]();new E(n[e(179)],this.tweenGroup).to({alpha:0},150)[e(134)](()=>{const a=e;this[a(132)].ticker[a(174)](_),this[a(113)].removeChild(n),n?.[a(223)]()}).start()}this[e(132)][e(153)][e(161)](_)}}const m=A;(function(f,t){const x=A,e=f();for(;;)try{if(parseInt(x(350))/1+parseInt(x(330))/2+-parseInt(x(322))/3*(-parseInt(x(334))/4)+parseInt(x(340))/5*(-parseInt(x(351))/6)+-parseInt(x(327))/7+-parseInt(x(348))/8+parseInt(x(316))/9*(parseInt(x(312))/10)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(k,870366);const e0={class:"relative"},s0={class:m(342)},a0={class:m(336)},i0=[m(314)],n0={class:m(311)},r0={key:0,id:m(345),class:m(325)},o0={class:m(315)},c0={class:m(343)},d0=["disabled"];function k(){const f=["div","input-wrap","投球路径（10 位，仅 L/R）","#1e1e1e","air","10275yhLHCZ","init","relative","w-full flex justify-center items-center","value","path-help","container","button","1822880DUfEvK","replace","364906rhHPvr","354wLpmut","input","请输入 10 位路径，仅允许 L 或 R","label","pins","path","off","AppPlinko","false","hint-row","4210MWrMIo","createBall","aria-invalid","counter","1215bqJuDq","setBallConfig"," 位，请填写 10 位","length","createPinsAndResultBoxes","get","105prWclC","/10","当前 ","help","ballConfig","7631015mOMdcM","test","toUpperCase","437100sgfXGU","input-control","characters","start-btn","190780JZAXvR"];return k=function(){return f},k()}function A(f,t){const x=k();return A=function(e,s){return e=e-304,x[e]},A(f,t)}const l0=10,h0=U({__name:m(309),setup(f){const t=m,x=P(null);let e;const s=P(""),c=S(()=>/^[LR]{10}$/[t(328)](s[t(344)])),l=P(!1),h=S(()=>{const a=t;return s[a(344)]?/[^LR]/[a(328)](s[a(344)])?"仅允许填写字符 L 或 R":s.value[a(319)]!==10?a(324)+s[a(344)][a(319)]+a(318):"":a(304)});function _(a){const r=t,o=a.target,d=o[r(344)][r(329)]()[r(349)](/[^LR]/g,"").slice(0,10);s[r(344)]=d}async function n(){const a=t;if(!c[a(344)]||l[a(344)]||!e)return;l[a(344)]=!0;const r=s[a(344)].split("");e[a(313)](r),setTimeout(()=>l[a(344)]=!1,400)}return Y(async()=>{const a=t,r=j[a(321)](10);x[a(344)]&&(e=new t0(x.value),await e[a(341)](300,276,a(338)),await e[a(320)](r?.[a(306)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(317)](r?.[a(326)].radius,r?.[a(326)][a(339)]))}),(a,r)=>{const o=t;return F(),T(o(335),e0,[w(o(335),s0,[w("div",{ref_key:o(346),ref:x,class:o(346)},null,512)]),w(o(335),a0,[r[1]||(r[1]=w("label",{class:o(305),for:o(307)},o(337),-1)),z(w(o(352),{id:"path",class:J([o(331),{invalid:!c[o(344)]&&s.value}]),type:"text","onUpdate:modelValue":r[0]||(r[0]=d=>s[o(344)]=d),maxlength:l0,placeholder:"例如：LRRLLRLR",onInput:_,autocomplete:o(308),autocapitalize:o(332),spellcheck:o(310),"aria-describedby":o(345),"aria-invalid":!c.value},null,42,i0),[[H,s[o(344)]]]),w("div",n0,[h[o(344)]?(F(),T("span",r0,X(h.value),1)):O("",!0),w("span",o0,X(s[o(344)][o(319)])+o(323),1)])]),w(o(335),c0,[w(o(347),{class:o(333),disabled:!c[o(344)]||l.value,onClick:n,title:"2 秒允许点击一次"}," 开始游戏 ",8,d0)])])}}});var N=M;(function(f,t){for(var x=M,e=f();;)try{var s=-parseInt(x(331))/1*(-parseInt(x(324))/2)+-parseInt(x(334))/3*(parseInt(x(327))/4)+-parseInt(x(328))/5*(-parseInt(x(329))/6)+parseInt(x(335))/7*(-parseInt(x(330))/8)+-parseInt(x(325))/9+parseInt(x(333))/10*(parseInt(x(326))/11)+parseInt(x(323))/12;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,844654);function B(){var f=["740276NikGzP","10WvhRhK","2833206DvgJkL","112suwKRJ","844298OLukok","data-v-cb23dd70","1557830gZwEKq","27CXLOgg","675717UBsUAR","__scopeId","27975624MiQHqi","4SrXTyP","14129460OLmZyl","33zZkedd"];return B=function(){return f},B()}function M(f,t){var x=B();return M=function(e,s){e=e-323;var c=x[e];return c},M(f,t)}const u0=Z(h0,[[N(336),N(332)]]);export{u0 as A,Z as _};
