import{d as F,r as M,c as T,o as V,a as Y,b as W,e as m,w as z,v as D,n as Q,f as O,t as E}from"./vendor-CxXntn1L.js";import{A as U,G as g,C as S,B as N}from"./vendor-pixi-js-B_Pjcr5q.js";import{m as L,_ as w}from"./vendor-matter-js-LIchnPBM.js";import{G as X,T as q}from"./vendor-tweenjs-BtMkXI7v.js";const j=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};(function(h,t){const x=y,e=h();for(;;)try{if(-parseInt(x(200))/1+-parseInt(x(198))/2*(parseInt(x(205))/3)+parseInt(x(204))/4+parseInt(x(201))/5+parseInt(x(199))/6+-parseInt(x(203))/7+-parseInt(x(202))/8*(-parseInt(x(197))/9)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(v,487032);function Z(){const h=c=>{const d=y,l=c[d(196)]((i,a)=>i+a,0);return c.map(i=>i/l)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function y(h,t){const x=v();return y=function(e,s){return e=e-196,x[e]},y(h,t)}const J=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function v(){const h=["113769UQeTOt","101160ceDVrd","2304324gZveeE","234977hSPfdk","1951695miZmaB","80qjBOsv","5012595xfwnMr","3565404baQxEJ","21SXLiWs","reduce"];return v=function(){return h},v()}const n=C;(function(h,t){const x=C,e=h();for(;;)try{if(-parseInt(x(311))/1+-parseInt(x(258))/2+-parseInt(x(280))/3+parseInt(x(334))/4*(-parseInt(x(326))/5)+-parseInt(x(350))/6*(parseInt(x(313))/7)+parseInt(x(253))/8*(parseInt(x(255))/9)+parseInt(x(266))/10===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,528217);function C(h,t){const x=R();return C=function(e,s){return e=e-230,x[e]},C(h,t)}function R(){const h=["roundRect","stackBox","devicePixelRatio","Composite","createElement","listenCollisions","getChildByLabel","recordCount","onComplete","2773266vKfiWf","createRoundedRect","run","reverse","add","pairs","getBg","height","create","Events","resBoxMap","pop","runner","toFixed","popCallback","canvas","#000","now","position","start","setRecordClickCb","ballParamsMap","stroke","resBoxAnimal","res-text-","remove","maxCount","clear","collisionStart","lastTime","velocityIterations","756539VzfBtS","findResultArea","5573442MNZLDx","label","pinsMatter","Bodies","mouseover","parseInt","ballConfig","res-","isNaN","mouseout","push","text","setBallConfig","15CSoxRX","createResultBox","circle","rows","gameRes","fill","width","click","1327380fswIiY","positionIterations","timing","setLevel","frictionAir","get","getShadow","gap","removeChild","显示游戏结果事件","tweenGroup","setGameRes","children","rotation","min","Engine","6ByMQJx","forEach","nextGroup","addXPower","radius","scale","engine","pinsGfx","length","addChild","getText","world","timeScale","boxWidth","angle","low","Runner","stage","setVelocity","createPinsAndResultBoxes","startY","destroy","update","boxHeight","set","nonCollideGroup","recordCallback","level","pinParams","ticker","248ASWlkp","recordArr","84339bjGZQu","dealCollisions","ballRadius","1411062SQzldA","firstY","row-","pinAnimal","floor","init","entries","style","44159490PuYCYI","startsWith","split","app","ball"];return R=function(){return h},R()}const{colors:K,shadows:H,resText:G,probabilities:$}=Z();class x0{id=1;[n(295)];[n(269)];[n(356)];[n(234)];runner;[n(332)];[n(287)];tickerFn;[n(301)]=new Map;pinParams={};[n(248)]=L.Body[n(352)](!0);[n(319)]={ballRadius:4,frictionAir:.05};popCallback;recordCallback;[n(330)];constructor(t){const x=n;this[x(295)]=document[x(275)](x(295)),t.appendChild(this[x(295)]),this.app=new U,this[x(356)]=w[x(349)][x(288)](),this[x(234)]=this[x(356)][x(234)],this[x(292)]=L.Runner.create(),this[x(356)][x(335)]=10,this[x(356)][x(310)]=10,this[x(356)][x(336)][x(235)]=2}async[n(263)](t,x,e){const s=n;this[s(332)]=t,this[s(287)]=x,this[s(295)][s(265)][s(332)]=t+"px",this[s(295)][s(265)][s(287)]=x+"px",this[s(272)].position[s(247)](this.width-45,this[s(287)]/4),this.app[s(240)][s(232)](this[s(272)]),await this[s(269)][s(263)]({canvas:this[s(295)],width:t,height:x,background:e,antialias:!0,resolution:window[s(273)]}),w[s(239)][s(282)](this[s(292)],this[s(356)]),this[s(276)]()}[n(325)](t,x){const e=n;this[e(319)]={ballRadius:t,frictionAir:x}}createBall(t){const x=n,e=this.width/2,s=[e,e+this.pinParams[x(341)]],c=[e,e-this[x(251)][x(341)]],d=t[0],l=Math[x(262)](Math.random()*2),_=d==="R"?s[l]:c[l],i=w[x(316)].circle(_,0,this[x(319)][x(257)],{id:this.id++,label:x(270),mass:1,restitution:0,friction:0,frictionAir:this[x(319)][x(338)],collisionFilter:{group:this[x(248)]}}),a=new g().circle(0,0,this[x(319)][x(257)])[x(331)](16733525);a[x(298)][x(247)](i.position.x,i.position.y),w[x(274)][x(284)](this[x(234)],i),this[x(269)][x(240)][x(232)](a);const o=()=>{const f=x;a[f(298)].set(i.position.x,i.position.y),a[f(347)]=i[f(237)];const p=(this[f(251)][f(329)]-2)*this[f(251)][f(341)]+this[f(251)][f(341)]/2;i[f(298)].y>p&&(this[f(312)](i[f(298)].x),w[f(274)].remove(this[f(234)],i),a[f(244)](),this[f(269)][f(252)][f(305)](o),this.ballParamsMap.delete(i.id))};this[x(269)].ticker[x(284)](o);const r={path:t,start:l,fir:d};this[x(301)][x(247)](i.id,r)}[n(315)]=[];[n(230)]=[];[n(242)](t){const x=n;this.clearPinsAndRes(),this[x(251)]=t;const{rows:e,startY:s,gap:c,pinRadius:d}=t;for(let l=2;l<e;l++){const _=l+1,i=(_-1)*c,a=this[x(332)]/2-i/2;for(let o=0;o<_;o++){const r=a+o*c,f=s+(l-2)*c,p=w[x(316)][x(328)](r,f,d,{isStatic:!0,label:"row-"+(l-1)+"-"+o}),u=new g()[x(328)](0,0,d).fill(16777215);u.x=r,u.y=f,this[x(315)][x(323)](p),this.pinsGfx.push(u),w[x(274)][x(284)](this[x(234)],p),this[x(269)][x(240)][x(232)](u)}}this[x(327)]()}[n(256)](t){const x=n,{bodyA:e,bodyB:s}=t,c=e[x(314)]===x(270)?e:s[x(314)]===x(270)?s:null,d=e[x(314)][x(267)](x(260))?e.label:s[x(314)][x(267)](x(260))?s.label:null,l=e[x(314)].startsWith("row-")?e:s[x(314)].startsWith(x(260))?s:null;if(l&&this[x(261)](l),!c||!d)return;const _=c.id,i=Number[x(318)](d[x(268)]("-")[1],10),a=this[x(301)][x(339)](_);if(!a)return;const{path:o,start:r,fir:f}=a;if(!o||!f||Number[x(321)](i))return;if(i===1){const u=f==="R"?r===0?1:-1:r===0?-1.2:1.2;this[x(353)](c,u);return}const p=o[i-1];p==="R"?this[x(353)](c,1.2):p==="L"&&this[x(353)](c,-1.2)}resBoxMap=new Map;[n(250)]=n(238);async[n(327)](){const t=n,x=this[t(251)][t(341)],e=x-2,s=this.pinParams.rows-1,c=s-2,d=this[t(251)][t(243)]+c*x+x/2,l=this.width/2-s*x/2,_=this[t(251)][t(329)]-2;for(let i=0;i<s;i++){const a=l+i*x+1,o=new S({label:t(320)+i,interactive:!0}),r=new g()[t(271)](0,0,e,14,2).fill({color:this[t(286)](_,i)}),f=new g()[t(271)](0,0,e,16,2).fill({color:this[t(340)](_,i)});f[t(298)].set(0,0);const p=this[t(233)](this[t(250)],_,i)||0,u=new N({label:t(304)+i,text:p+`
x`,style:{fontSize:14,fill:t(296),align:"center"},anchor:.5});u[t(298)][t(247)](e/2,8),u[t(355)][t(247)](.4),o.addChild(f),o[t(232)](r),o[t(232)](u),o.position[t(247)](a,d),this[t(290)].set(i,o),this[t(269)][t(240)].addChild(o),o.on(t(317),()=>{const I=t;this.popCallback(!0,this.getProbability(this[I(251)][I(329)]-2,i)[I(293)](4))}),o.on(t(322),()=>{this[t(294)](!1)})}}clearPinsAndRes(){const t=n;for(const x of this[t(315)])w[t(274)][t(305)](this[t(234)],x);for(const x of this[t(230)])x[t(244)]();this[t(315)]=[],this[t(230)]=[],this[t(290)][t(351)](x=>{x.destroy()}),this[t(290)].clear(),this[t(259)]=0}addXPower(t,x){const e=n;L.Body[e(241)](t,{x,y:0})}[n(286)](t,x){return K["_"+t][x]}[n(340)](t,x){return H["_"+t][x]}[n(233)](t,x,e){return G[t]["_"+x][e]}getProbability(t,x){return $["_"+t][x]*100}setPopCb(t){const x=n;this[x(294)]=t}[n(300)](t){const x=n;this[x(249)]=t}[n(337)](t){const x=n;if(this[x(250)]=t,!!G[t])for(const[s,c]of this[x(290)]){const d=c[x(277)](x(304)+s),l=G[t]["_"+(this[x(251)][x(329)]-2)][s];d[x(324)]=l+`
x`}}[n(312)](t){const x=n;for(const[e,s]of this[x(290)][x(264)]()){const c=s.x,d=s.x+s[x(332)];t>=c&&t<=d&&(this[x(303)](s),console.log("Ball hit result box "+e))}}[n(276)](){const t=n;w[t(289)].on(this[t(356)],t(308),x=>{const e=t;for(const s of x[e(285)])this[e(256)](s)})}[n(261)](t){const x=n,e=new g;e.position[x(247)](t[x(298)].x,t[x(298)].y),this[x(269)][x(240)][x(232)](e);const s=0,c=10,d=400,l=performance[x(297)](),_=i=>{const a=x,o=i-l,r=Math[a(348)](o/d,1),f=s+(c-s)*r,p=.9*(1-r);e[a(307)]();const u=t.circleRadius??4;e[a(328)](0,0,u*1.2+f)[a(331)]({color:16777215,alpha:p}),r<1?requestAnimationFrame(_):e[a(244)]()};requestAnimationFrame(_)}[n(259)]=0;[n(303)](t){const x=n,e=t[x(298)].y;this.firstY||(this.firstY=e);const s=4,c=150,d=performance.now(),l=_=>{const i=x,a=_-d,o=Math[i(348)](a/c,1);t[i(298)].y=e+s*o,o<1?requestAnimationFrame(l):t[i(298)].y=this[i(259)]};requestAnimationFrame(l)}[n(344)]=new X;[n(254)]=[];[n(306)]=4;boxWidth=26;[n(246)]=26;stackBox=new S;[n(278)]=0;[n(345)](t){this.gameRes=t}[n(281)](t,x,e){const s=n,c=e?.6:1,d=[{x:0,y:this.boxHeight,radius:0},{x:this[s(236)],y:this.boxHeight,radius:0},{x:this[s(236)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2].radius=4,d[3].radius=4):t===this.maxCount-1&&(d[0][s(354)]=4,d[1][s(354)]=4),new g({label:String(x)}).roundShape(d,10)[s(331)]({color:x,alpha:c})[s(302)]({width:1,color:0})}addRecord(t,x){const e=n,s=new S({interactive:!0});s[e(298)].set(0,-this[e(246)]);const c=this[e(281)](this.recordCount,x),d=new N({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d.position.x=this[e(236)]/2,d[e(298)].y=this[e(246)]/2,s[e(232)](c),s[e(232)](d),this[e(272)].addChild(s),this[e(254)].unshift(s);let l;s.on("mouseover",()=>{const i=e;l=this[i(281)](this[i(278)],0,!0),s[i(232)](l)}),s.on("mouseout",()=>{const i=e;l&&(s[i(342)](l),l?.[i(244)](),l=null)}),s.on(e(333),()=>{const i=e;console.log(i(343)),this.recordCallback&&this[i(249)]()}),this[e(278)]++,this[e(278)]===4&&(this[e(278)]=1),this.recordArr.forEach((i,a)=>{const o=e,r=a*this[o(246)];if(this[o(254)][o(231)]>1){const f=this.recordArr[a],p=f[o(342)](f[o(346)][0]),u=p[o(314)];p.destroy(),this[o(254)][a][o(232)](this[o(281)](a,Number(u))),this[o(254)][a][o(346)][o(283)]()}new q(i[o(298)],this.tweenGroup).to({y:r},200)[o(299)]()});const _=i=>{const a=e;this[a(344)][a(245)](i[a(309)])};if(this.recordArr[e(231)]>this.maxCount){const i=this[e(254)][e(291)]();new q(i[e(298)],this.tweenGroup).to({alpha:0},150)[e(279)](()=>{const a=e;this[a(269)][a(252)].remove(_),this[a(272)][a(342)](i),i?.[a(244)]()})[e(299)]()}this[e(269)][e(252)][e(284)](_)}}const b=B;(function(h,t){const x=B,e=h();for(;;)try{if(parseInt(x(210))/1+-parseInt(x(237))/2*(parseInt(x(226))/3)+-parseInt(x(256))/4+-parseInt(x(249))/5+parseInt(x(260))/6*(-parseInt(x(225))/7)+-parseInt(x(239))/8*(parseInt(x(234))/9)+-parseInt(x(257))/10*(-parseInt(x(222))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(k,397811);function k(){const h=["div","3361625rBEjOf","例如：LRRLLRLR","path-help","aria-invalid","start-btn","input-control","toUpperCase","2097828MUqGIU","3820ScbbWg","path","AppPlinko","2010reoKOD","split","get","85248quscNJ","characters","relative","length","container","createBall","ballConfig","air","slice","button","label","value","72765DxDvAD","请输入 10 位路径，仅允许 L 或 R","false","10815VVQISW","169737VhKvgm","w-full flex justify-center items-center","投球路径（10 位，仅 L/R）","radius","input","createPinsAndResultBoxes","test","/10","3990879rzgWCn"," 位，请填写 10 位"," 开始游戏 ","2EKFCCP","help","8QAyBQk","setBallConfig","#1e1e1e","input-wrap","pins","disabled","off","span","counter"];return k=function(){return h},k()}function B(h,t){const x=k();return B=function(e,s){return e=e-209,x[e]},B(h,t)}const t0={class:b(212)},e0={class:"relative"},s0={class:b(242)},a0=[b(252)],i0={class:"hint-row"},n0={key:0,id:b(251),class:b(238)},o0={class:b(247)},r0={class:b(227)},c0=[b(244)],f0=10,d0=F({__name:b(259),setup(h){const t=b,x=M(null);let e;const s=M(""),c=T(()=>/^[LR]{10}$/.test(s[t(221)])),d=M(!1),l=T(()=>{const a=t;return s[a(221)]?/[^LR]/[a(232)](s[a(221)])?"仅允许填写字符 L 或 R":s[a(221)].length!==10?"当前 "+s[a(221)].length+a(235):"":a(223)});function _(a){const o=t,r=a.target,f=r[o(221)][o(255)]().replace(/[^LR]/g,"")[o(218)](0,10);s.value=f}async function i(){const a=t;if(!c[a(221)]||d[a(221)]||!e)return;d[a(221)]=!0;const o=s[a(221)][a(261)]("");e[a(215)](o),setTimeout(()=>d[a(221)]=!1,400)}return V(async()=>{const a=t,o=J[a(209)](10);x[a(221)]&&(e=new x0(x[a(221)]),await e.init(300,276,a(241)),await e[a(231)](o?.[a(243)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(240)](o?.[a(216)][a(229)],o?.[a(216)][a(217)]))}),(a,o)=>{const r=t;return W(),Y("div",t0,[m(r(248),e0,[m(r(248),{ref_key:r(214),ref:x,class:"container"},null,512)]),m(r(248),s0,[o[1]||(o[1]=m(r(220),{class:r(220),for:r(258)},r(228),-1)),z(m(r(230),{id:r(258),class:Q([r(254),{invalid:!c[r(221)]&&s[r(221)]}]),type:"text","onUpdate:modelValue":o[0]||(o[0]=f=>s.value=f),maxlength:f0,placeholder:r(250),onInput:_,autocomplete:r(245),autocapitalize:r(211),spellcheck:r(224),"aria-describedby":r(251),"aria-invalid":!c[r(221)]},null,42,a0),[[D,s[r(221)]]]),m("div",i0,[l[r(221)]?(W(),Y("span",n0,E(l[r(221)]),1)):O("",!0),m(r(246),o0,E(s[r(221)][r(213)])+r(233),1)])]),m(r(248),r0,[m(r(219),{class:r(253),disabled:!c[r(221)]||d[r(221)],onClick:i,title:"2 秒允许点击一次"},r(236),8,c0)])])}}});var l0=A;function A(h,t){var x=P();return A=function(e,s){e=e-157;var c=x[e];return c},A(h,t)}(function(h,t){for(var x=A,e=h();;)try{var s=parseInt(x(162))/1+parseInt(x(161))/2+-parseInt(x(157))/3*(parseInt(x(163))/4)+parseInt(x(164))/5*(-parseInt(x(160))/6)+-parseInt(x(158))/7+-parseInt(x(165))/8+parseInt(x(166))/9;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(P,905855);function P(){var h=["21136YXaeZJ","1250201WqaTaX","140awBOFm","45785cTjzqh","10963936YNyTnO","27796887ICBMZt","17709YIpcqw","5500838XsdtUN","data-v-cb23dd70","708jUKrJe"];return P=function(){return h},P()}const b0=j(d0,[["__scopeId",l0(159)]]);export{b0 as A,j as _};
