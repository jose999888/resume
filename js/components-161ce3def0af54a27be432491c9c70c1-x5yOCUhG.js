import{_ as u,A as N,G as g,m as q,C as A,B as L,a as Y,T,d as K,r as P,c as S,o as U,b as F,e as G,f as m,w as X,v as D,n as V,g as W,t as E}from"./vendor-D7Mga84_.js";const Z=(h,t)=>{const x=h.__vccOpts||h;for(const[e,a]of t)x[e]=a;return x};(function(h,t){const x=C,e=h();for(;;)try{if(parseInt(x(252))/1+-parseInt(x(251))/2*(-parseInt(x(258))/3)+parseInt(x(254))/4*(-parseInt(x(257))/5)+parseInt(x(255))/6+-parseInt(x(253))/7+-parseInt(x(247))/8*(parseInt(x(256))/9)+parseInt(x(249))/10*(parseInt(x(250))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(v,578171);function j(){const h=r=>{const d=C,f=r[d(248)]((c,s)=>c+s,0);return r.map(c=>c/f)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function C(h,t){const x=v();return C=function(e,a){return e=e-247,x[e]},C(h,t)}const z=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function v(){const h=["2317567cUtLog","436eUPhWb","1855926ArtwFy","45DPuktK","17065ghXiSr","6IrMqrZ","1091968bxuSia","reduce","170arSKZv","64867ToTUxG","689764qzlFUi","864415kbxKDi"];return v=function(){return h},v()}const i=I;(function(h,t){const x=I,e=h();for(;;)try{if(-parseInt(x(142))/1*(-parseInt(x(212))/2)+parseInt(x(145))/3+parseInt(x(157))/4+parseInt(x(147))/5*(-parseInt(x(153))/6)+parseInt(x(200))/7*(-parseInt(x(193))/8)+-parseInt(x(112))/9+-parseInt(x(222))/10*(-parseInt(x(121))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,596614);function I(h,t){const x=R();return I=function(e,a){return e=e-104,x[e]},I(h,t)}function R(){const h=["setBallConfig","recordCount","ballRadius","update","530aZIuQs","Composite","Body","set","level","resBoxAnimal","mouseover","circleRadius","firstY","getBg","min","center","popCallback","4194117dcHlcQ","boxHeight","Bodies","delete","length","#000","nextGroup","gap","addChild","265782dpDudr","runner","label","rotation","now","addXPower","width","res-","clear","start","engine","getText","ballParamsMap","显示游戏结果事件","roundRect","findResultArea","getProbability","circle","remove","reverse","recordArr","895qIEudy","stage","pinAnimal","814041HWjfce","radius","1123935rhTojQ","startY","ball","createRoundedRect","positionIterations","velocityIterations","30gHkhKm","pop","createElement","appendChild","4215836CmrZNw","gameRes","tickerFn","res-text-","entries","roundShape","click","stackBox","forEach","height","destroy","resBoxMap","style","frictionAir","devicePixelRatio","boxWidth","world","removeChild","tweenGroup","setVelocity","add","text","ballConfig","createResultBox","random","maxCount","Engine","pinsMatter","row-","app","timeScale","mouseout","stroke","setRecordClickCb","Runner","nonCollideGroup","7320XExcjp","listenCollisions","pinParams","setLevel","log","recordCallback","ticker","5803VfgSNL","pinsGfx","position","startsWith","rows","clearPinsAndRes","onComplete","createBall","Events","getChildByLabel","getShadow","run","758trCqun","canvas","push","pairs","scale","fill"];return R=function(){return h},R()}const{colors:Q,shadows:H,resText:M,probabilities:J}=j();class O{id=1;[i(213)];[i(186)];engine;[i(173)];[i(122)];[i(127)];[i(166)];[i(159)];[i(133)]=new Map;[i(195)]={};[i(192)]=u[i(224)][i(118)](!0);[i(179)]={ballRadius:4,frictionAir:.05};[i(111)];[i(198)];[i(158)];constructor(t){const x=i;this.canvas=document[x(155)](x(213)),t[x(156)](this[x(213)]),this[x(186)]=new N,this[x(131)]=u[x(183)].create(),this[x(173)]=this[x(131)].world,this.runner=u[x(191)].create(),this[x(131)][x(151)]=10,this[x(131)][x(152)]=10,this.engine.timing[x(187)]=2}async init(t,x,e){const a=i;this.width=t,this[a(166)]=x,this.canvas.style[a(127)]=t+"px",this[a(213)][a(169)][a(166)]=x+"px",this[a(164)][a(202)][a(225)](this[a(127)]-45,this[a(166)]/4),this[a(186)].stage.addChild(this[a(164)]),await this[a(186)].init({canvas:this[a(213)],width:t,height:x,background:e,antialias:!0,resolution:window[a(171)]}),u[a(191)][a(211)](this[a(122)],this[a(131)]),this[a(194)]()}[i(218)](t,x){const e=i;this[e(179)]={ballRadius:t,frictionAir:x}}[i(207)](t){const x=i,e=this[x(127)]/2,a=[e,e+this[x(195)][x(119)]],r=[e,e-this[x(195)][x(119)]],d=t[0],f=Math.floor(Math[x(181)]()*2),b=d==="R"?a[f]:r[f],c=u[x(114)][x(138)](b,0,this.ballConfig[x(220)],{id:this.id++,label:x(149),mass:1,restitution:0,friction:0,frictionAir:this[x(179)][x(170)],collisionFilter:{group:this[x(192)]}}),s=new g()[x(138)](0,0,this.ballConfig[x(220)])[x(217)](16733525);s[x(202)][x(225)](c[x(202)].x,c[x(202)].y),u[x(223)][x(177)](this[x(173)],c),this[x(186)][x(143)][x(120)](s);const n=()=>{const l=x;s[l(202)][l(225)](c[l(202)].x,c[l(202)].y),s[l(124)]=c.angle;const _=(this[l(195)][l(204)]-2)*this.pinParams.gap+this[l(195)].gap/2;c[l(202)].y>_&&(this[l(136)](c[l(202)].x),u[l(223)][l(139)](this[l(173)],c),s.destroy(),this.app[l(199)][l(139)](n),this.ballParamsMap[l(115)](c.id))};this.app.ticker[x(177)](n);const o={path:t,start:f,fir:d};this[x(133)][x(225)](c.id,o)}[i(184)]=[];pinsGfx=[];createPinsAndResultBoxes(t){const x=i;this[x(205)](),this[x(195)]=t;const{rows:e,startY:a,gap:r,pinRadius:d}=t;for(let f=2;f<e;f++){const b=f+1,c=(b-1)*r,s=this[x(127)]/2-c/2;for(let n=0;n<b;n++){const o=s+n*r,l=a+(f-2)*r,_=q.Bodies[x(138)](o,l,d,{isStatic:!0,label:x(185)+(f-1)+"-"+n}),p=new g().circle(0,0,d)[x(217)](16777215);p.x=o,p.y=l,this[x(184)][x(214)](_),this[x(201)][x(214)](p),u[x(223)][x(177)](this[x(173)],_),this.app[x(143)][x(120)](p)}}this[x(180)]()}dealCollisions(t){const x=i,{bodyA:e,bodyB:a}=t,r=e[x(123)]===x(149)?e:a.label===x(149)?a:null,d=e[x(123)][x(203)](x(185))?e.label:a[x(123)][x(203)](x(185))?a[x(123)]:null,f=e.label[x(203)](x(185))?e:a.label[x(203)](x(185))?a:null;if(f&&this[x(144)](f),!r||!d)return;const b=r.id,c=Number.parseInt(d.split("-")[1],10),s=this.ballParamsMap.get(b);if(!s)return;const{path:n,start:o,fir:l}=s;if(!n||!l||Number.isNaN(c))return;if(c===1){const p=l==="R"?o===0?1:-1:o===0?-1.2:1.2;this[x(126)](r,p);return}const _=n[c-1];_==="R"?this[x(126)](r,1.2):_==="L"&&this.addXPower(r,-1.2)}[i(168)]=new Map;[i(226)]="low";async createResultBox(){const t=i,x=this.pinParams.gap,e=x-2,a=this[t(195)].rows-1,r=a-2,d=this[t(195)][t(148)]+r*x+x/2,f=this[t(127)]/2-a*x/2,b=this[t(195)][t(204)]-2;for(let c=0;c<a;c++){const s=f+c*x+1,n=new A({label:t(128)+c,interactive:!0}),o=new g()[t(135)](0,0,e,14,2)[t(217)]({color:this.getBg(b,c)}),l=new g()[t(135)](0,0,e,16,2).fill({color:this[t(210)](b,c)});l[t(202)][t(225)](0,0);const _=this.getText(this[t(226)],b,c)||0,p=new L({label:t(160)+c,text:_+`
x`,style:{fontSize:14,fill:t(117),align:t(110)},anchor:.5});p[t(202)].set(e/2,8),p[t(216)].set(.4),n[t(120)](l),n[t(120)](o),n[t(120)](p),n[t(202)][t(225)](s,d),this[t(168)].set(c,n),this[t(186)][t(143)].addChild(n),n.on(t(105),()=>{const y=t;this[y(111)](!0,this[y(137)](this[y(195)][y(204)]-2,c).toFixed(4))}),n.on("mouseout",()=>{this[t(111)](!1)})}}[i(205)](){const t=i;for(const x of this[t(184)])u[t(223)][t(139)](this[t(173)],x);for(const x of this[t(201)])x.destroy();this[t(184)]=[],this[t(201)]=[],this[t(168)][t(165)](x=>{x[t(167)]()}),this[t(168)].clear(),this[t(107)]=0}addXPower(t,x){const e=i;u[e(224)][e(176)](t,{x,y:0})}[i(108)](t,x){return Q["_"+t][x]}[i(210)](t,x){return H["_"+t][x]}[i(132)](t,x,e){return M[t]["_"+x][e]}[i(137)](t,x){return J["_"+t][x]*100}setPopCb(t){const x=i;this[x(111)]=t}[i(190)](t){const x=i;this[x(198)]=t}[i(196)](t){const x=i;if(this.level=t,!!M[t])for(const[a,r]of this.resBoxMap){const d=r[x(209)](x(160)+a),f=M[t]["_"+(this[x(195)].rows-2)][a];d[x(178)]=f+`
x`}}[i(136)](t){const x=i;for(const[e,a]of this.resBoxMap[x(161)]()){const r=a.x,d=a.x+a[x(127)];t>=r&&t<=d&&(this[x(104)](a),console[x(197)]("Ball hit result box "+e))}}[i(194)](){const t=i;u[t(208)].on(this[t(131)],"collisionStart",x=>{const e=t;for(const a of x[e(215)])this.dealCollisions(a)})}pinAnimal(t){const x=i,e=new g;e[x(202)].set(t[x(202)].x,t.position.y),this.app[x(143)][x(120)](e);const a=0,r=10,d=400,f=performance[x(125)](),b=c=>{const s=x,n=c-f,o=Math.min(n/d,1),l=a+(r-a)*o,_=.9*(1-o);e[s(129)]();const p=t[s(106)]??4;e.circle(0,0,p*1.2+l)[s(217)]({color:16777215,alpha:_}),o<1?requestAnimationFrame(b):e[s(167)]()};requestAnimationFrame(b)}[i(107)]=0;[i(104)](t){const x=i,e=t[x(202)].y;this[x(107)]||(this[x(107)]=e);const a=4,r=150,d=performance.now(),f=b=>{const c=x,s=b-d,n=Math[c(109)](s/r,1);t[c(202)].y=e+a*n,n<1?requestAnimationFrame(f):t.position.y=this.firstY};requestAnimationFrame(f)}[i(175)]=new Y;[i(141)]=[];[i(182)]=4;[i(172)]=26;[i(113)]=26;[i(164)]=new A;recordCount=0;setGameRes(t){const x=i;this[x(158)]=t}[i(150)](t,x,e){const a=i,r=e?.6:1,d=[{x:0,y:this[a(113)],radius:0},{x:this[a(172)],y:this[a(113)],radius:0},{x:this[a(172)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2][a(146)]=4,d[3][a(146)]=4):t===this.maxCount-1&&(d[0][a(146)]=4,d[1][a(146)]=4),new g({label:String(x)})[a(162)](d,10)[a(217)]({color:x,alpha:r})[a(189)]({width:1,color:0})}addRecord(t,x){const e=i,a=new A({interactive:!0});a[e(202)][e(225)](0,-this[e(113)]);const r=this[e(150)](this[e(219)],x),d=new L({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d[e(202)].x=this.boxWidth/2,d[e(202)].y=this[e(113)]/2,a.addChild(r),a[e(120)](d),this[e(164)][e(120)](a),this[e(141)].unshift(a);let f;a.on("mouseover",()=>{const c=e;f=this[c(150)](this[c(219)],0,!0),a.addChild(f)}),a.on(e(188),()=>{const c=e;f&&(a.removeChild(f),f?.[c(167)](),f=null)}),a.on(e(163),()=>{const c=e;console[c(197)](c(134)),this[c(198)]&&this[c(198)]()}),this[e(219)]++,this[e(219)]===4&&(this[e(219)]=1),this[e(141)].forEach((c,s)=>{const n=e,o=s*this[n(113)];if(this[n(141)].length>1){const l=this.recordArr[s],_=l[n(174)](l.children[0]),p=_.label;_[n(167)](),this[n(141)][s][n(120)](this[n(150)](s,Number(p))),this[n(141)][s].children[n(140)]()}new T(c[n(202)],this[n(175)]).to({y:o},200)[n(130)]()});const b=c=>{const s=e;this[s(175)][s(221)](c.lastTime)};if(this.recordArr[e(116)]>this.maxCount){const c=this[e(141)][e(154)]();new T(c[e(202)],this[e(175)]).to({alpha:0},150)[e(206)](()=>{const s=e;this[s(186)][s(199)].remove(b),this[s(164)][s(174)](c),c?.[s(167)]()}).start()}this[e(186)][e(199)].add(b)}}const w=k;(function(h,t){const x=k,e=h();for(;;)try{if(parseInt(x(318))/1+-parseInt(x(326))/2*(parseInt(x(336))/3)+parseInt(x(330))/4*(-parseInt(x(357))/5)+parseInt(x(334))/6+parseInt(x(319))/7+parseInt(x(323))/8+-parseInt(x(320))/9*(parseInt(x(311))/10)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,753051);const $={class:"relative"},x0={class:w(342)},t0={class:"input-wrap"},e0=["aria-invalid"],a0={class:w(337)},s0={key:0,id:w(343),class:w(332)},i0={class:w(335)},c0={class:w(346)},n0=[w(327)];function B(){const h=["1059821RodPZo","9026423GMQqYs","14751mfmkYy","AppPlinko","div","8126072wuZKVw","length","path","3594hBXbJj","disabled","characters","false","12892uKNWcX","target","help","input","7278378UTlDnr","counter","888EQytix","hint-row","container","ballConfig","例如：LRRLLRLR","投球路径（10 位，仅 L/R）","relative","path-help","#1e1e1e","createPinsAndResultBoxes","w-full flex justify-center items-center","2 秒允许点击一次","仅允许填写字符 L 或 R","radius","setBallConfig","button","slice","label","test","get","init","260FKefuc","span","/10","19070axepBi","请输入 10 位路径，仅允许 L 或 R"," 位，请填写 10 位","toUpperCase","value","air","input-control"];return B=function(){return h},B()}function k(h,t){const x=B();return k=function(e,a){return e=e-310,x[e]},k(h,t)}const o0=10,r0=K({__name:w(321),setup(h){const t=w,x=P(null);let e;const a=P(""),r=S(()=>/^[LR]{10}$/[t(354)](a.value)),d=P(!1),f=S(()=>{const s=t;return a[s(315)]?/[^LR]/[s(354)](a[s(315)])?s(348):a[s(315)][s(324)]!==10?"当前 "+a[s(315)][s(324)]+s(313):"":s(312)});function b(s){const n=t,o=s[n(331)],l=o.value[n(314)]().replace(/[^LR]/g,"")[n(352)](0,10);a[n(315)]=l}async function c(){const s=t;if(!r[s(315)]||d[s(315)]||!e)return;d[s(315)]=!0;const n=a.value.split("");e.createBall(n),setTimeout(()=>d[s(315)]=!1,400)}return U(async()=>{const s=t,n=z[s(355)](10);x.value&&(e=new O(x[s(315)]),await e[s(356)](300,276,s(344)),await e[s(345)](n?.pins??{rows:12,startY:24,gap:24,pinRadius:4}),e[s(350)](n?.[s(339)][s(349)],n?.ballConfig[s(316)]))}),(s,n)=>{const o=t;return G(),F("div",$,[m("div",x0,[m(o(322),{ref_key:o(338),ref:x,class:o(338)},null,512)]),m(o(322),t0,[n[1]||(n[1]=m("label",{class:o(353),for:o(325)},o(341),-1)),X(m(o(333),{id:"path",class:V([o(317),{invalid:!r[o(315)]&&a[o(315)]}]),type:"text","onUpdate:modelValue":n[0]||(n[0]=l=>a[o(315)]=l),maxlength:o0,placeholder:o(340),onInput:b,autocomplete:"off",autocapitalize:o(328),spellcheck:o(329),"aria-describedby":o(343),"aria-invalid":!r[o(315)]},null,42,e0),[[D,a[o(315)]]]),m(o(322),a0,[f[o(315)]?(G(),F(o(358),s0,E(f[o(315)]),1)):W("",!0),m(o(358),i0,E(a[o(315)][o(324)])+o(310),1)])]),m("div",c0,[m(o(351),{class:"start-btn",disabled:!r[o(315)]||d[o(315)],onClick:c,title:o(347)}," 开始游戏 ",8,n0)])])}}}),l0=Z(r0,[["__scopeId","data-v-cb23dd70"]]);export{Z as _,l0 as a};
