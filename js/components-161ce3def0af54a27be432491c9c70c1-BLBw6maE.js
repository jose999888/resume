import{d as q,r as M,c as F,o as O,a as Y,b as N,e as b,w as j,v as H,n as J,f as X,t as T}from"./vendor-BVj2_wH_.js";import{A as D,G as w,C as L,B as S}from"./vendor-pixi-js-KO_wzmDG.js";import{_ as m,m as G}from"./vendor-matter-js-DKIxhJoF.js";import{G as K,T as z}from"./vendor-tweenjs-BtMkXI7v.js";const U=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function I(h,t){const x=v();return I=function(e,s){return e=e-111,x[e]},I(h,t)}(function(h,t){const x=I,e=h();for(;;)try{if(-parseInt(x(112))/1+parseInt(x(111))/2+parseInt(x(113))/3+parseInt(x(122))/4*(-parseInt(x(116))/5)+-parseInt(x(121))/6*(parseInt(x(119))/7)+-parseInt(x(120))/8*(parseInt(x(114))/9)+parseInt(x(118))/10===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(v,564459);function V(){const h=f=>{const l=I,d=f[l(115)]((a,i)=>a+i,0);return f[l(117)](a=>a/d)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function v(){const h=["map","21600600iLszcm","3677114qOicGW","4328088HUpOXR","12cIKuza","4YlWuhh","94148NESevt","1025652jzeQNZ","3334299EZlFvE","9CCYRnr","reduce","684205ulYtIH"];return v=function(){return h},v()}const Z=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),c=y;function y(h,t){const x=C();return y=function(e,s){return e=e-201,x[e]},y(h,t)}(function(h,t){const x=y,e=h();for(;;)try{if(parseInt(x(237))/1*(parseInt(x(313))/2)+parseInt(x(224))/3+parseInt(x(239))/4*(-parseInt(x(321))/5)+parseInt(x(293))/6+parseInt(x(309))/7+parseInt(x(217))/8+-parseInt(x(270))/9===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,516271);function C(){const h=["startY","1893484gOvPMA","rows","stage","gap","gameRes","setVelocity","random","createRoundedRect","circleRadius","Bodies","collisionStart","getChildByLabel","ticker","min","timing","isNaN","parseInt","children","lastTime","unshift","entries","createBall","boxHeight","radius","start","pinParams","toFixed","listenCollisions","firstY","init","dealCollisions","2805930zuPIzN","runner","click","get","显示游戏结果事件","getText","nextGroup","ballRadius","recordCount","remove","resBoxMap","createPinsAndResultBoxes","pinsMatter","devicePixelRatio","createResultBox","getProbability","length","row-","boxWidth","reverse","text","pinsGfx","resBoxAnimal","237696OpbCqq","stackBox","tweenGroup","maxCount","startsWith","Ball hit result box ","split","fill","style","ballConfig","forEach","pairs","popCallback","height","mouseout","canvas","122885FxkTOd","addChild","create","engine","88bOpgSl","Composite","tickerFn","now","label","addXPower","recordCallback","Runner","10lGMDoe","width","findResultArea","roundShape","roundRect","set","low","ballParamsMap","clear","nonCollideGroup","ball","app","Body","floor","angle","log","setRecordClickCb","velocityIterations","removeChild","delete","3588920qaIXtR","add","setBallConfig","getShadow","res-","clearPinsAndRes","res-text-","777327gJUrCS","onComplete","destroy","position","#000","pinAnimal","world","positionIterations","circle","recordArr","mouseover","rotation","level","22952OyTmLd"];return C=function(){return h},C()}const{colors:Q,shadows:$,resText:E,probabilities:x0}=V();class t0{id=1;[c(308)];[c(208)];engine;[c(230)];[c(271)];[c(322)];[c(306)];[c(315)];[c(204)]=new Map;pinParams={};nonCollideGroup=m[c(209)][c(276)](!0);[c(302)]={ballRadius:4,frictionAir:.05};[c(305)];[c(319)];[c(243)];constructor(t){const x=c;this[x(308)]=document.createElement(x(308)),t.appendChild(this.canvas),this[x(208)]=new D,this[x(312)]=G.Engine.create(),this[x(230)]=this[x(312)][x(230)],this[x(271)]=m[x(320)][x(311)](),this[x(312)][x(231)]=10,this[x(312)][x(214)]=10,this[x(312)][x(253)].timeScale=2}async init(t,x,e){const s=c;this[s(322)]=t,this.height=x,this[s(308)][s(301)][s(322)]=t+"px",this[s(308)][s(301)][s(306)]=x+"px",this[s(294)][s(227)][s(202)](this[s(322)]-45,this.height/4),this.app[s(241)][s(310)](this[s(294)]),await this[s(208)][s(268)]({canvas:this[s(308)],width:t,height:x,background:e,antialias:!0,resolution:window[s(283)]}),m[s(320)].run(this[s(271)],this[s(312)]),this[s(266)]()}[c(219)](t,x){this.ballConfig={ballRadius:t,frictionAir:x}}[c(260)](t){const x=c,e=this[x(322)]/2,s=[e,e+this[x(264)][x(242)]],f=[e,e-this[x(264)].gap],l=t[0],d=Math[x(210)](Math[x(245)]()*2),_=l==="R"?s[d]:f[d],a=G.Bodies[x(232)](_,0,this[x(302)][x(277)],{id:this.id++,label:x(207),mass:1,restitution:0,friction:0,frictionAir:this[x(302)].frictionAir,collisionFilter:{group:this[x(206)]}}),i=new w()[x(232)](0,0,this.ballConfig[x(277)])[x(300)](16733525);i[x(227)].set(a.position.x,a[x(227)].y),m[x(314)][x(218)](this[x(230)],a),this[x(208)].stage[x(310)](i);const n=()=>{const r=x;i.position[r(202)](a[r(227)].x,a[r(227)].y),i[r(235)]=a[r(211)];const p=(this[r(264)][r(240)]-2)*this[r(264)][r(242)]+this[r(264)][r(242)]/2;a.position.y>p&&(this[r(323)](a[r(227)].x),m[r(314)][r(279)](this[r(230)],a),i[r(226)](),this[r(208)][r(251)][r(279)](n),this[r(204)][r(216)](a.id))};this[x(208)][x(251)][x(218)](n);const o={path:t,start:d,fir:l};this.ballParamsMap[x(202)](a.id,o)}pinsMatter=[];pinsGfx=[];[c(281)](t){const x=c;this[x(222)](),this[x(264)]=t;const{rows:e,startY:s,gap:f,pinRadius:l}=t;for(let d=2;d<e;d++){const _=d+1,a=(_-1)*f,i=this[x(322)]/2-a/2;for(let n=0;n<_;n++){const o=i+n*f,r=s+(d-2)*f,p=m[x(248)][x(232)](o,r,l,{isStatic:!0,label:x(287)+(d-1)+"-"+n}),u=new w()[x(232)](0,0,l).fill(16777215);u.x=o,u.y=r,this[x(282)].push(p),this[x(291)].push(u),m[x(314)][x(218)](this[x(230)],p),this[x(208)].stage[x(310)](u)}}this[x(284)]()}[c(269)](t){const x=c,{bodyA:e,bodyB:s}=t,f=e[x(317)]===x(207)?e:s.label===x(207)?s:null,l=e[x(317)][x(297)]("row-")?e[x(317)]:s[x(317)].startsWith(x(287))?s[x(317)]:null,d=e[x(317)][x(297)](x(287))?e:s[x(317)][x(297)](x(287))?s:null;if(d&&this[x(229)](d),!f||!l)return;const _=f.id,a=Number[x(255)](l[x(299)]("-")[1],10),i=this[x(204)][x(273)](_);if(!i)return;const{path:n,start:o,fir:r}=i;if(!n||!r||Number[x(254)](a))return;if(a===1){const u=r==="R"?o===0?1:-1:o===0?-1.2:1.2;this[x(318)](f,u);return}const p=n[a-1];p==="R"?this[x(318)](f,1.2):p==="L"&&this[x(318)](f,-1.2)}[c(280)]=new Map;[c(236)]=c(203);async[c(284)](){const t=c,x=this.pinParams[t(242)],e=x-2,s=this[t(264)][t(240)]-1,f=s-2,l=this.pinParams[t(238)]+f*x+x/2,d=this[t(322)]/2-s*x/2,_=this[t(264)][t(240)]-2;for(let a=0;a<s;a++){const i=d+a*x+1,n=new L({label:t(221)+a,interactive:!0}),o=new w()[t(201)](0,0,e,14,2)[t(300)]({color:this.getBg(_,a)}),r=new w()[t(201)](0,0,e,16,2).fill({color:this[t(220)](_,a)});r[t(227)][t(202)](0,0);const p=this.getText(this[t(236)],_,a)||0,u=new S({label:t(223)+a,text:p+`
x`,style:{fontSize:14,fill:t(228),align:"center"},anchor:.5});u[t(227)][t(202)](e/2,8),u.scale[t(202)](.4),n.addChild(r),n.addChild(o),n[t(310)](u),n.position[t(202)](i,l),this[t(280)][t(202)](a,n),this.app[t(241)][t(310)](n),n.on(t(234),()=>{const P=t;this[P(305)](!0,this[P(285)](this.pinParams.rows-2,a)[P(265)](4))}),n.on("mouseout",()=>{this.popCallback(!1)})}}clearPinsAndRes(){const t=c;for(const x of this[t(282)])m[t(314)][t(279)](this[t(230)],x);for(const x of this[t(291)])x[t(226)]();this[t(282)]=[],this.pinsGfx=[],this[t(280)][t(303)](x=>{x[t(226)]()}),this[t(280)][t(205)](),this[t(267)]=0}[c(318)](t,x){const e=c;m[e(209)][e(244)](t,{x,y:0})}getBg(t,x){return Q["_"+t][x]}[c(220)](t,x){return $["_"+t][x]}[c(275)](t,x,e){return E[t]["_"+x][e]}getProbability(t,x){return x0["_"+t][x]*100}setPopCb(t){const x=c;this[x(305)]=t}[c(213)](t){const x=c;this[x(319)]=t}setLevel(t){const x=c;if(this[x(236)]=t,!!E[t])for(const[s,f]of this[x(280)]){const l=f[x(250)](x(223)+s),d=E[t]["_"+(this[x(264)].rows-2)][s];l[x(290)]=d+`
x`}}[c(323)](t){const x=c;for(const[e,s]of this[x(280)][x(259)]()){const f=s.x,l=s.x+s.width;t>=f&&t<=l&&(this[x(292)](s),console[x(212)](x(298)+e))}}listenCollisions(){const t=c;G.Events.on(this[t(312)],t(249),x=>{const e=t;for(const s of x[e(304)])this[e(269)](s)})}[c(229)](t){const x=c,e=new w;e[x(227)][x(202)](t[x(227)].x,t[x(227)].y),this[x(208)][x(241)][x(310)](e);const s=0,f=10,l=400,d=performance[x(316)](),_=a=>{const i=x,n=a-d,o=Math.min(n/l,1),r=s+(f-s)*o,p=.9*(1-o);e[i(205)]();const u=t[i(247)]??4;e[i(232)](0,0,u*1.2+r)[i(300)]({color:16777215,alpha:p}),o<1?requestAnimationFrame(_):e[i(226)]()};requestAnimationFrame(_)}[c(267)]=0;resBoxAnimal(t){const x=c,e=t.position.y;this.firstY||(this[x(267)]=e);const s=4,f=150,l=performance[x(316)](),d=_=>{const a=x,i=_-l,n=Math[a(252)](i/f,1);t[a(227)].y=e+s*n,n<1?requestAnimationFrame(d):t[a(227)].y=this[a(267)]};requestAnimationFrame(d)}[c(295)]=new K;[c(233)]=[];[c(296)]=4;[c(288)]=26;[c(261)]=26;[c(294)]=new L;[c(278)]=0;setGameRes(t){const x=c;this[x(243)]=t}[c(246)](t,x,e){const s=c,f=e?.6:1,l=[{x:0,y:this[s(261)],radius:0},{x:this[s(288)],y:this[s(261)],radius:0},{x:this.boxWidth,y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(l[2][s(262)]=4,l[3][s(262)]=4):t===this[s(296)]-1&&(l[0][s(262)]=4,l[1][s(262)]=4),new w({label:String(x)})[s(324)](l,10)[s(300)]({color:x,alpha:f}).stroke({width:1,color:0})}addRecord(t,x){const e=c,s=new L({interactive:!0});s[e(227)].set(0,-this.boxHeight);const f=this[e(246)](this[e(278)],x),l=new S({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});l[e(227)].x=this[e(288)]/2,l[e(227)].y=this[e(261)]/2,s[e(310)](f),s[e(310)](l),this[e(294)][e(310)](s),this[e(233)][e(258)](s);let d;s.on(e(234),()=>{const a=e;d=this[a(246)](this[a(278)],0,!0),s[a(310)](d)}),s.on(e(307),()=>{const a=e;d&&(s[a(215)](d),d?.[a(226)](),d=null)}),s.on(e(272),()=>{const a=e;console[a(212)](a(274)),this.recordCallback&&this.recordCallback()}),this[e(278)]++,this.recordCount===4&&(this[e(278)]=1),this[e(233)][e(303)]((a,i)=>{const n=e,o=i*this[n(261)];if(this[n(233)][n(286)]>1){const r=this.recordArr[i],p=r[n(215)](r[n(256)][0]),u=p[n(317)];p[n(226)](),this[n(233)][i][n(310)](this[n(246)](i,Number(u))),this[n(233)][i][n(256)][n(289)]()}new z(a.position,this[n(295)]).to({y:o},200)[n(263)]()});const _=a=>{const i=e;this[i(295)].update(a[i(257)])};if(this[e(233)].length>this[e(296)]){const a=this.recordArr.pop();new z(a[e(227)],this[e(295)]).to({alpha:0},150)[e(225)](()=>{const i=e;this[i(208)][i(251)][i(279)](_),this.stackBox[i(215)](a),a?.[i(226)]()})[e(263)]()}this[e(208)].ticker[e(218)](_)}}const g=k;(function(h,t){const x=k,e=h();for(;;)try{if(-parseInt(x(364))/1*(-parseInt(x(373))/2)+-parseInt(x(360))/3+parseInt(x(368))/4+parseInt(x(377))/5+-parseInt(x(396))/6+-parseInt(x(359))/7*(parseInt(x(378))/8)+-parseInt(x(390))/9*(-parseInt(x(397))/10)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,487906);const e0={class:"relative"},s0={class:"relative"},i0={class:"input-wrap"},a0=["aria-invalid"],n0={class:g(365)},c0={key:0,id:"path-help",class:g(398)},o0={class:g(392)},r0={class:g(372)},f0=[g(385)];function R(){const h=["747CEJXIh"," 开始游戏 ","counter","slice","AppPlinko","container","5380548AKlnRP","249880eYKtNo","help","span","label","characters"," 位，请填写 10 位","button","length","98sXutyB","1814658MBWfIm","init","split","投球路径（10 位，仅 L/R）","1601nhlbzE","hint-row","setBallConfig","air","1061400JCyMJL","ballConfig","pins","input","w-full flex justify-center items-center","334ZJETcu","target","createPinsAndResultBoxes","input-control","678185aDpxpZ","430176brfhio","请输入 10 位路径，仅允许 L 或 R","value","仅允许填写字符 L 或 R","get","path","false","disabled","当前 ","div","test","createBall"];return R=function(){return h},R()}function k(h,t){const x=R();return k=function(e,s){return e=e-353,x[e]},k(h,t)}const l0=10,d0=q({__name:g(394),setup(h){const t=g,x=M(null);let e;const s=M(""),f=F(()=>/^[LR]{10}$/[t(388)](s[t(380)])),l=M(!1),d=F(()=>{const i=t;return s[i(380)]?/[^LR]/[i(388)](s.value)?i(381):s[i(380)][i(358)]!==10?i(386)+s.value[i(358)]+i(356):"":i(379)});function _(i){const n=t,o=i[n(374)],r=o[n(380)].toUpperCase().replace(/[^LR]/g,"")[n(393)](0,10);s.value=r}async function a(){const i=t;if(!f[i(380)]||l.value||!e)return;l[i(380)]=!0;const n=s.value[i(362)]("");e[i(389)](n),setTimeout(()=>l[i(380)]=!1,400)}return O(async()=>{const i=t,n=Z[i(382)](10);x[i(380)]&&(e=new t0(x[i(380)]),await e[i(361)](300,276,"#1e1e1e"),await e[i(375)](n?.[i(370)]??{rows:12,startY:24,gap:24,pinRadius:4}),e[i(366)](n?.[i(369)].radius,n?.[i(369)][i(367)]))}),(i,n)=>{const o=t;return N(),Y("div",e0,[b(o(387),s0,[b("div",{ref_key:o(395),ref:x,class:o(395)},null,512)]),b("div",i0,[n[1]||(n[1]=b(o(354),{class:o(354),for:o(383)},o(363),-1)),j(b(o(371),{id:o(383),class:J([o(376),{invalid:!f[o(380)]&&s[o(380)]}]),type:"text","onUpdate:modelValue":n[0]||(n[0]=r=>s[o(380)]=r),maxlength:l0,placeholder:"例如：LRRLLRLR",onInput:_,autocomplete:"off",autocapitalize:o(355),spellcheck:o(384),"aria-describedby":"path-help","aria-invalid":!f.value},null,42,a0),[[H,s[o(380)]]]),b(o(387),n0,[d.value?(N(),Y(o(353),c0,T(d[o(380)]),1)):X("",!0),b(o(353),o0,T(s.value[o(358)])+"/10",1)])]),b(o(387),r0,[b(o(357),{class:"start-btn",disabled:!f.value||l[o(380)],onClick:a,title:"2 秒允许点击一次"},o(391),8,f0)])])}}});var W=A;(function(h,t){for(var x=A,e=h();;)try{var s=parseInt(x(127))/1*(-parseInt(x(129))/2)+-parseInt(x(121))/3*(parseInt(x(126))/4)+-parseInt(x(124))/5+-parseInt(x(118))/6+parseInt(x(128))/7+-parseInt(x(125))/8*(-parseInt(x(123))/9)+parseInt(x(119))/10;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,683934);function A(h,t){var x=B();return A=function(e,s){e=e-118;var f=x[e];return f},A(h,t)}const b0=U(d0,[[W(120),W(122)]]);function B(){var h=["10915380PexNqY","__scopeId","70494ckrYjX","data-v-cb23dd70","81tFjcvB","349140jWbnYJ","598280FFFyIy","80dgrgAW","1GEclHl","8270717pYOKgp","1870098jEHuNr","4724178btIWmw"];return B=function(){return h},B()}export{b0 as A,U as _};
